(function(){var m,aJ,aq,bb,ag,aV,Q,P,ax,ah,aR,aA,X,aT,u,t,ay,a7,aN,H,ap,a9,d,j,aD,E,aO,a8,aW,C,ao,W,a4,ac,aj,ai,y,ar,L,az,am,F,U,q,aZ,af,Z,aS,au,J,f,ae,r,aU,bf,aY,aB,z,A,aC,V,D,aX,a2,aL,aw,b,n,ad,ak,al,aM,K,Y,bd,s,G,v,bc,N,a5,ab,aG,a0,M,S,o,be,aE,a3,a1,at,I,B,p,w,e,R,aH,h,av,aQ,aI,aF,O,aP,a6,a,g,T,x,c,aa,i,ba,aK,k,an,l;aE=Math.random;R=Math.round;af=Math.floor;O=Math.sqrt;aQ=Math.sin;C=Math.cos;a=Math.tan;H=Math.asin;aT=Math.acos;ap=Math.atan;a0=Math.pow;X=Math.abs;aA=Math.PI;F=function(bh){var bi,bj,bg;bg=[];for(bi=0,bj=bh.length-1;0<=bj?bi<=bj:bi>=bj;0<=bj?bi++:bi--){bg.push([bi,bh[bi]])}return bg};E=function(bi){var bh,bg;if(!(bi!=null)||typeof bi!=="object"){return bi}bg=new bi.constructor();for(bh in bi){bg[bh]=E(bi[bh])}return bg};a3=function(bh){var bg;bg=af(aE()*bh.length);return bh[bg]};b=function(bh,bg){return[bh*bg[0],bh*bg[1],bh*bg[2]]};l=function(bh,bg){return[bh[0]*bg[0],bh[1]*bg[1],bh[2]*bg[2]]};u=function(bh,bg){return[bh[0]+bg[0],bh[1]+bg[1],bh[2]+bg[2]]};a6=function(bh,bg){return[bh[0]-bg[0],bh[1]-bg[1],bh[2]-bg[2]]};y=function(bh,bg){return bh[0]*bg[0]+bh[1]*bg[1]+bh[2]*bg[2]};ao=function(bh,bg){return[bh[1]*bg[2]-bh[2]*bg[1],bh[2]*bg[0]-bh[0]*bg[2],bh[0]*bg[1]-bh[1]*bg[0]]};D=function(bg){return O(y(bg,bg))};aX=function(bg){return y(bg,bg)};ba=function(bg){return b(1/O(aX(bg)),bg)};aL=function(bh,bg){return b(1/2,u(bh,bg))};i=function(bi,bh,bg){return[(1-bg)*bi[0]+bg*bh[0],(1-bg)*bi[1]+bg*bh[1],(1-bg)*bi[2]+bg*bh[2]]};al=function(bh,bg){return i(bh,bg,1/3)};at=function(bg){return b(1/aX(bg),bg)};g=function(bi,bh){var bg;bg=a6(bh,bi);return a6(bi,b(y(bg,bi)/aX(bg),bg))};am=function(bh,bg){return O(aX(g(bh,bg)))};aM=function(bk,bj,bi){var bh,bg;bh=a6(bj,bk);bg=a6(bi,bj);return ao(bh,bg)};A=function(bn,bm,bl){var br,bq,bp,bk,bj,bi,bo,bh,bg;for(bk=0,bo=bn.length;bk<bo;bk++){br=bn[bk];for(bj=0,bh=bm.length;bj<bh;bj++){bq=bm[bj];if(br===bq){for(bi=0,bg=bl.length;bi<bg;bi++){bp=bl[bi];if(br===bp){return br}}}}}return null};a9=function(bk){var bi,bh,bj,bg;bi=[0,0,0];for(bj=0,bg=bk.length;bj<bg;bj++){bh=bk[bj];bi=u(bi,bh)}return b(1/bk.length,bi)};ad=function(bk){var bg,bo,bm,bl,bi,bn,bj,bh;bg=[0,0,0];bj=bk.slice(-2),bo=bj[0],bm=bj[1];for(bi=0,bn=bk.length;bi<bn;bi++){bl=bk[bi];bg=u(bg,aM(bo,bm,bl));bh=[bm,bl],bo=bh[0],bm=bh[1]}return ba(bg)};a8=function(bk){var bg,bo,bm,bl,bi,bn,bj,bh;bg=0;bj=bk.slice(0,2),bo=bj[0],bm=bj[1];bh=bk.slice(2);for(bi=0,bn=bh.length;bi<bn;bi++){bl=bh[bi];bg+=D(ao(a6(bm,bo),a6(bl,bo)));bm=bl}return bg};S=function(bn){var bl,bh,bg,bk,bo,bp,bj,bm,bi;bk=E(bn);bp=bn[0];bk=_.map(bk,function(bq){return bq-bp});bh=ad(bn);bl=ba(a9(bn));bg=ao(bh,bl);bi=[];for(bj=0,bm=bk.length;bj<bm;bj++){bo=bk[bj];bi.push([y(bh,bo),y(bg,bo)])}return bi};aW=function(bi){var bh,bg,bj;bg=new Array(bi.length);for(bh=0,bj=bi.length-1;0<=bj?bh<=bj:bh>=bj;0<=bj?bh++:bh--){bg[bh]=bi[bh].slice(0)}return bg};n=function(bh,bg){return[bh[0][0]*bg[0]+bh[0][1]*bg[1]+bh[0][2]*bg[2],bh[1][0]*bg[0]+bh[1][1]*bg[1]+bh[1][2]*bg[2],bh[2][0]*bg[0]+bh[2][1]*bg[1]+bh[2][2]*bg[2]]};aw=function(bg,bh){return[[bg[0][0]*bh[0][0]+bg[0][1]*bh[1][0]+bg[0][2]*bh[2][0],bg[0][0]*bh[0][1]+bg[0][1]*bh[1][1]+bg[0][2]*bh[2][1],bg[0][0]*bh[0][2]+bg[0][1]*bh[1][2]+bg[0][2]*bh[2][2]],[bg[1][0]*bh[0][0]+bg[1][1]*bh[1][0]+bg[1][2]*bh[2][0],bg[1][0]*bh[0][1]+bg[1][1]*bh[1][1]+bg[1][2]*bh[2][1],bg[1][0]*bh[0][2]+bg[1][1]*bh[1][2]+bg[1][2]*bh[2][2]],[bg[2][0]*bh[0][0]+bg[2][1]*bh[1][0]+bg[2][2]*bh[2][0],bg[2][0]*bh[0][1]+bg[2][1]*bh[1][1]+bg[2][2]*bh[2][1],bg[2][0]*bh[0][2]+bg[2][1]*bh[1][2]+bg[2][2]*bh[2][2]]]};q=[[1,0,0],[0,1,0],[0,0,1]];e=function(bk,bi,bj){var bl,bh,bg;bl=[[C(bk),-1*aQ(bk),0],[aQ(bk),C(bk),0],[0,0,1]];bg=[[C(bi),0,-1*aQ(bi)],[0,1,0],[aQ(bi),0,C(bi)]];bh=[[1,0,0],[0,C(bj),-1*aQ(bj)],[0,aQ(bj),C(bj)]];return aw(bh,aw(bg,bl))};aK=function(bk,bt,br,bo){var bn,bh,bi,bs,bq,bg,bp,bl,bm,bj;bk/=2;bs=aQ(bk);bn=C(bk);bq=bs*bs;bh=D([bt,br,bo]);if(bh===0){bm=[0,0,1],bt=bm[0],br=bm[1],bo=bm[2]}if(bh!==1){bj=ba([bt,br,bo]),bt=bj[0],br=bj[1],bo=bj[2]}if(bt===1&&br===0&&bo===0){bi=[[1,0,0],[0,1-2*bq,2*bs*bn],[0,-2*bs*bn,1-2*bq]]}else{if(bt===0&&br===1&&bo===0){bi=[[1-2*bq,0,-2*bs*bn],[0,1,0],[2*bs*bn,0,1-2*bq]]}else{if(bt===0&&br===0&&bo===1){bi=[[1-2*bq,2*bs*bn,0],[-2*bs*bn,1-2*bq,0],[0,0,1]]}else{bg=bt*bt;bp=br*br;bl=bo*bo;bi=[[1-2*(bp+bl)*bq,2*(bt*br*bq+bo*bs*bn),2*(bt*bo*bq-br*bs*bn)],[2*(br*bt*bq-bo*bs*bn),1-2*(bl+bg)*bq,2*(br*bo*bq+bt*bs*bn)],[2*(bo*bt*bq+br*bs*bn),2*(bo*br*bq-bt*bs*bn),1-2*(bg+bp)*bq]]}}}return bi};s=function(bi,bh,bj,bm,bg){var bk,bl;bl=(bh*bm-bj)/(1-bm);bk=bg*bm/(1-bm);return[bk*bi[0]/(bi[2]+bl),bk*bi[1]/(bi[2]+bl)]};aC=function(bn,bk,bq,bo,bu,bj,bi,bh){var bt,bg,bp,bl,br,bw,by,bm,bs,bv,bx;bs=(bu*bi-bj)/(1-bi);bt=bh*bi/(1-bi);bp=bn-bq;bw=bk-bo;bg=bt*bt;bv=bs*bs;bl=bp*bp;by=bw*bw;br=(2*bt*bp*bs+O(4*bg*bl*bv+4*bl*(bg+bl+by)*(1-bv)))/(2*(bg+bl+by));bm=(bt*bw*bs)/(bg+bl+by)+(bw*O(4*bg*bv+4*(bg+bl+by)*(1-bv)))/(2*(bg+bl+by));bx=O(1-br*br-bm*bm);return[br,bm,bx]};au=function(bi,bh){var bj,bg;bg=ao(bi,bh);bj=aT(y(bi,bh));return aK(-1*bj,bg[0],bg[1],bg[2])};aZ=function(bj){var bh,bl,bk,bi,bg;bh=[];bl=bj.slice(-1)[0];for(bi=0,bg=bj.length;bi<bg;bi++){bk=bj[bi];bh.push([bl,bk]);bl=bk}return bh};aG=(function(){function bg(){this.face=new Array();this.xyz=new Array();this.name="null polyhedron"}bg.prototype.data=function(){var bh;bh=this.face.length+this.xyz.length-2;return"("+this.face.length+" faces, "+bh+" edges, "+this.xyz.length+" vertices)"};bg.prototype.getEdges=function(){var br,bn,bp,bo,bi,bm,bl,bs,bk,bj,bq,bh;bm={};bs=[];bn=_(this.face).map(aZ);for(bk=0,bq=bn.length;bk<bq;bk++){bi=bn[bk];for(bj=0,bh=bi.length;bj<bh;bj++){bo=bi[bj];if(bo[0]<bo[1]){br=bo[0],bp=bo[1]}else{bp=bo[0],br=bo[1]}bm[br+"~"+bp]=bo}}for(bl in bm){bo=bm[bl];bs.push(bo)}return bs};bg.prototype.centers=function(){var bm,bn,bj,bp,bk,bi,bo,bh,bl;bm=[];bl=this.face;for(bk=0,bo=bl.length;bk<bo;bk++){bn=bl[bk];bj=[0,0,0];for(bi=0,bh=bn.length;bi<bh;bi++){bp=bn[bi];bj=u(bj,this.xyz[bp])}bm.push(b(1/bn.length,bj))}return bm};bg.prototype.normals=function(){var bl,bm,bi,bk,bh,bj;bm=[];bj=poly.face;for(bk=0,bh=bj.length;bk<bh;bk++){bl=bj[bk];normals.push(ad((function(){var bp,bn,bo;bo=[];for(bp=0,bn=bl.length;bp<bn;bp++){bi=bl[bp];bo.push(poly.xyz[bi])}return bo})()))}return bm};bg.prototype.toOBJ=function(){var bt,bs,bi,bu,bw,bq,bp,bo,bm,bv,bj,bh,bx,br,bn,bl,bk;bu="#Produced by polyHÃ©dronisme http://levskaya.github.com/polyhedronisme\n";bu+="group "+this.name+"\n";bu+="#vertices\n";br=this.xyz;for(bq=0,bv=br.length;bq<bv;bq++){bw=br[bq];bu+="v "+bw[0]+" "+bw[1]+" "+bw[2]+"\n"}bu+="#normal vector defs \n";bn=this.face;for(bp=0,bj=bn.length;bp<bj;bp++){bt=bn[bp];bi=ad((function(){var bz,bA,by;by=[];for(bz=0,bA=bt.length;bz<bA;bz++){bw=bt[bz];by.push(this.xyz[bw])}return by}).call(this));bu+="vn "+bi[0]+" "+bi[1]+" "+bi[2]+"\n"}bu+="#face defs \n";bl=F(this.face);for(bo=0,bh=bl.length;bo<bh;bo++){bk=bl[bo],bs=bk[0],bt=bk[1];bu+="f ";for(bm=0,bx=bt.length;bm<bx;bm++){bw=bt[bm];bu+=""+(bw+1)+"//"+(bs+1)+" "}bu+="\n"}return bu};bg.prototype.toX3D=function(){var bl,bw,br,bt,bu,bp,bo,bn,bk,bs,bi,bh,bv,bq,bm,bj;bl=0.01;bu='<?xml version="1.0" encoding ="UTF-8"?>\n<X3D profile="Interchange" version="3.0">\n<head>\n<component name="Rendering" level="3"/>\n<meta name="generator" content="Polyhedronisme"/>\n<meta name="version" content="0.1.0"/>\n</head>\n<Scene>\n<Shape>\n<IndexedFaceSet normalPerVertex="false" coordIndex="';bq=this.face;for(bp=0,bs=bq.length;bp<bs;bp++){br=bq[bp];for(bo=0,bi=br.length;bo<bi;bo++){bt=br[bo];bu+=""+bt+" "}bu+="-1\n"}bu+='">\n';bu+='<Color color="';bm=this.face_colors;for(bn=0,bh=bm.length;bn<bh;bn++){bw=bm[bn];bu+=""+bw[0]+" "+bw[1]+" "+bw[2]+" "}bu+='"/>';bu+='<Coordinate point="';bj=this.xyz;for(bk=0,bv=bj.length;bk<bv;bk++){bt=bj[bk];bu+=""+(bt[0]*bl)+" "+(bt[1]*bl)+" "+(bt[2]*bl)+" "}bu+='"/>\n';bu+="</IndexedFaceSet>\n</Shape>\n</Scene>\n</X3D>";return bu};return bg})();c=function(){var bg;bg=new aG();bg.name="T";bg.face=[[0,1,2],[0,2,3],[0,3,1],[1,3,2]];bg.xyz=[[1,1,1],[1,-1,-1],[-1,1,-1],[-1,-1,1]];return bg};ak=function(){var bg;bg=new aG();bg.name="O";bg.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]];bg.xyz=[[0,0,1.414],[1.414,0,0],[0,1.414,0],[-1.414,0,0],[0,-1.414,0],[0,0,-1.414]];return bg};ac=function(){var bg;bg=new aG();bg.name="C";bg.face=[[3,0,1,2],[3,4,5,0],[0,5,6,1],[1,6,7,2],[2,7,4,3],[5,4,7,6]];bg.xyz=[[0.707,0.707,0.707],[-0.707,0.707,0.707],[-0.707,-0.707,0.707],[0.707,-0.707,0.707],[0.707,-0.707,-0.707],[0.707,0.707,-0.707],[-0.707,0.707,-0.707],[-0.707,-0.707,-0.707]];return bg};aY=function(){var bg;bg=new aG();bg.name="I";bg.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]];bg.xyz=[[0,0,1.176],[1.051,0,0.526],[0.324,1,0.525],[-0.851,0.618,0.526],[-0.851,-0.618,0.526],[0.325,-1,0.526],[0.851,0.618,-0.526],[0.851,-0.618,-0.526],[-0.325,1,-0.526],[-1.051,0,-0.526],[-0.325,-1,-0.526],[0,0,-1.176]];return bg};ai=function(){var bg;bg=new aG();bg.name="D";bg.face=[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]];bg.xyz=[[0,0,1.07047],[0.713644,0,0.797878],[-0.356822,0.618,0.797878],[-0.356822,-0.618,0.797878],[0.797878,0.618034,0.356822],[0.797878,-0.618,0.356822],[-0.934172,0.381966,0.356822],[0.136294,1,0.356822],[0.136294,-1,0.356822],[-0.934172,-0.381966,0.356822],[0.934172,0.381966,-0.356822],[0.934172,-0.381966,-0.356822],[-0.797878,0.618,-0.356822],[-0.136294,1,-0.356822],[-0.136294,-1,-0.356822],[-0.797878,-0.618034,-0.356822],[0.356822,0.618,-0.797878],[0.356822,-0.618,-0.797878],[-0.713644,0,-0.797878],[0,0,-1.07047]];return bg};M=function(bk){var bt,bs,bg,bi,bq,bp,br,bn,bl,bj,bh,bo,bm;bi=2*aA/bk;bt=Math.sin(bi/2);bg=new aG();bg.name="P"+bk;for(bs=0,br=bk-1;0<=br?bs<=br:bs>=br;0<=br?bs++:bs--){bg.xyz.push([C(bs*bi),aQ(bs*bi),bt])}for(bs=0,bn=bk-1;0<=bn?bs<=bn:bs>=bn;0<=bn?bs++:bs--){bg.xyz.push([C(bs*bi),aQ(bs*bi),-bt])}bg.face.push((function(){bo=[];for(var bu=bl=bk-1;bl<=0?bu<=0:bu>=0;bl<=0?bu++:bu--){bo.push(bu)}return bo}).apply(this));bg.face.push((function(){bm=[];for(var bu=bk,bv=2*bk-1;bk<=bv?bu<=bv:bu>=bv;bk<=bv?bu++:bu--){bm.push(bu)}return bm}).apply(this));for(bs=0,bh=bk-1;0<=bh?bs<=bh:bs>=bh;0<=bh?bs++:bs--){bg.face.push([bs,(bs+1)%bk,(bs+1)%bk+bk,bs+bk])}bg.xyz=t(bg,1);return bg};aN=function(bl){var bv,bu,bt,bh,bg,bj,br,bq,bs,bo,bm,bk,bi,bp,bn;bj=2*aA/bl;bu=O(1-4/(4+2*C(bj/2)-2*C(bj)));bg=O(1-bu*bu);bv=O(bu*bu+a0(bg*C(bj/2),2));bg=bg/bv;bu=bu/bv;bh=new aG();bh.name="A"+bl;for(bt=0,bs=bl-1;0<=bs?bt<=bs:bt>=bs;0<=bs?bt++:bt--){bh.xyz.push([bg*C(bt*bj),bg*aQ(bt*bj),bu])}for(bt=0,bo=bl-1;0<=bo?bt<=bo:bt>=bo;0<=bo?bt++:bt--){bh.xyz.push([bg*C((bt+0.5)*bj),bg*aQ((bt+0.5)*bj),-bu])}bh.face.push((function(){bp=[];for(var bw=bm=bl-1;bm<=0?bw<=0:bw>=0;bm<=0?bw++:bw--){bp.push(bw)}return bp}).apply(this));bh.face.push((function(){bn=[];for(var bw=bl,bx=2*bl-1;bl<=bx?bw<=bx:bw>=bx;bl<=bx?bw++:bw--){bn.push(bw)}return bn}).apply(this));for(bt=0,bi=bl-1;0<=bi?bt<=bi:bt>=bi;0<=bi?bt++:bt--){bh.face.push([bt,(bt+1)%bl,bt+bl]);bh.face.push([bt,bt+bl,(bl+bt-1)%bl+bl])}bh.xyz=t(bh,1);return bh};be=function(bi){var bp,bo,bg,bh,bm,bn,bk,bj,bl;bh=2*aA/bi;bp=1;bg=new aG();bg.name="Y"+bi;for(bo=0,bn=bi-1;0<=bn?bo<=bn:bo>=bn;0<=bn?bo++:bo--){bg.xyz.push([C(bo*bh),aQ(bo*bh),0.2])}bg.xyz.push([0,0,-1*bp]);bg.face.push((function(){bl=[];for(var bq=bk=bi-1;bk<=0?bq<=0:bq>=0;bk<=0?bq++:bq--){bl.push(bq)}return bl}).apply(this));for(bo=0,bj=bi-1;0<=bj?bo<=bj:bo>=bj;0<=bj?bo++:bo--){bg.face.push([bo,(bo+1)%bi,bi])}bg.xyz=d(bg,3);return bg};ab=(function(){function bg(){this.flags=new Object();this.verts=new Object();this.xyzs=new Object()}bg.prototype.newV=function(bi,bh){if(this.verts[bi]===void 0){this.verts[bi]=0;return this.xyzs[bi]=bh}};bg.prototype.newFlag=function(bh,bj,bi){if(this.flags[bh]===void 0){this.flags[bh]={}}return this.flags[bh][bj]=bi};bg.prototype.topoly=function(){var bi,bn,bq,bm,bk,bh,bo,bp,bl,bj;bh=new aG();bi=0;bl=this.verts;for(bm in bl){bo=bl[bm];bh.xyz[bi]=this.xyzs[bm];this.verts[bm]=bi;bi++}bi=0;bj=this.flags;for(bm in bj){bn=bj[bm];bh.face[bi]=[];for(bk in bn){bo=bn[bk];bp=bo;break}bo=bp;bh.face[bi].push(this.verts[bo]);bo=this.flags[bm][bo];bq=0;while(bo!==bp){bh.face[bi].push(this.verts[bo]);bo=this.flags[bm][bo];bq++;if(bq>1000){console.log("Bad flag spec, have a neverending face:",bm,this.flags[bm]);break}}bi++}bh.name="unknown polyhedron";return bh};return bg})();V=function(bp,bv){var bz,by,bw,bC,bo,bx,br,bt,bu,bs,bn,bk,bl,bi,bg,bB,bD,bA,bq,bm,bj,bh;console.log("Taking kis of "+(bv===0?"":bv)+"-sided faces of "+bp.name+"...");bw=new ab();bq=F(bp.xyz);for(bl=0,bB=bq.length;bl<bB;bl++){bm=bq[bl],bx=bm[0],bu=bm[1];bw.newV("v"+bx,bu)}bt=bp.normals();bz=bp.centers();bo=false;bj=F(bp.face);for(bi=0,bD=bj.length;bi<bD;bi++){bh=bj[bi],bx=bh[0],by=bh[1];bn="v"+by.slice(-1)[0];for(bg=0,bA=by.length;bg<bA;bg++){bs=by[bg];bk="v"+bs;if(by.length===bv||bv===0){bo=true;bw.newV("f"+bx,u(bz[bx],b(0.1,bt[bx])));bC=bx+bn;bw.newFlag(bC,bn,bk);bw.newFlag(bC,bk,"f"+bx);bw.newFlag(bC,"f"+bx,bn)}else{bw.newFlag(bx,bn,bk)}bn=bk}}if(!bo){console.log("No "+bv+"-fold components were found.")}br=bw.topoly();br.name="k"+(bv===0?"":bv)+bp.name;return br};a2=function(bh,bg){if(bh<bg){return bh+"_"+bg}else{return bg+"_"+bh}};ay=function(bh){var bq,br,bp,bl,bv,bu,bs,bn,bm,bt,bg,bo,bk,bj,bi;console.log("Taking ambo of "+bh.name+"...");br=new ab();bo=F(bh.face);for(bn=0,bt=bo.length;bn<bt;bn++){bk=bo[bn],bp=bk[0],bq=bk[1];bj=bq.slice(-2),bv=bj[0],bu=bj[1];for(bm=0,bg=bq.length;bm<bg;bm++){bs=bq[bm];if(bv<bu){br.newV(a2(bv,bu),aL(bh.xyz[bv],bh.xyz[bu]))}br.newFlag("f"+bp,a2(bv,bu),a2(bu,bs));br.newFlag("v"+bu,a2(bu,bs),a2(bv,bu));bi=[bu,bs],bv=bi[0],bu=bi[1]}}bl=br.topoly();bl.name="a"+bh.name;return bl};aU=function(bu){var bC,bB,bz,bG,bA,by,bw,bx,bt,bq,bn,br,bo,bl,bj,bF,bH,bE,bD,bv,bi,bs,bp,bm,bk,bh,bg,bJ,bI;console.log("Taking gyro of "+bu.name+"...");bz=new ab();bv=F(bu.xyz);for(br=0,bF=bv.length;br<bF;br++){bs=bv[br],bA=bs[0],bx=bs[1];bz.newV("v"+bA,ba(bx))}bC=bu.centers();bp=F(bu.face);for(bo=0,bH=bp.length;bo<bH;bo++){bm=bp[bo],bA=bm[0],bB=bm[1];bz.newV("f"+bA,ba(bC[bA]))}bk=F(bu.face);for(bl=0,bE=bk.length;bl<bE;bl++){bh=bk[bl],bA=bh[0],bB=bh[1];bg=bB.slice(-2),bt=bg[0],bq=bg[1];bJ=F(bB);for(bj=0,bD=bJ.length;bj<bD;bj++){bI=bJ[bj],by=bI[0],bx=bI[1];bn=bx;bz.newV(bt+"~"+bq,al(bu.xyz[bt],bu.xyz[bq]));bG=bA+"f"+bt;bz.newFlag(bG,"f"+bA,bt+"~"+bq);bz.newFlag(bG,bt+"~"+bq,bq+"~"+bt);bz.newFlag(bG,bq+"~"+bt,"v"+bq);bz.newFlag(bG,"v"+bq,bq+"~"+bn);bz.newFlag(bG,bq+"~"+bn,"f"+bA);bi=[bq,bn],bt=bi[0],bq=bi[1]}}bw=bz.topoly();bw.name="g"+bu.name;return bw};o=function(br){var bx,bv,bz,bw,bt,bu,bq,bn,bk,bo,bl,bi,by,bB,bA,bs,bp,bm,bj,bh,bg;console.log("Taking propellor of "+br.name+"...");bv=new ab();bs=F(br.xyz);for(bo=0,by=bs.length;bo<by;bo++){bp=bs[bo],bw=bp[0],bu=bp[1];bv.newV("v"+bw,ba(bu))}bm=F(br.face);for(bl=0,bB=bm.length;bl<bB;bl++){bj=bm[bl],bw=bj[0],bx=bj[1];bh=bx.slice(-2),bq=bh[0],bn=bh[1];for(bi=0,bA=bx.length;bi<bA;bi++){bu=bx[bi];bk=""+bu;bv.newV(bq+"~"+bn,al(br.xyz[bq],br.xyz[bn]));bz=""+bw+"f"+bn;bv.newFlag("v"+bw,bq+"~"+bn,bn+"~"+bk);bv.newFlag(bz,bq+"~"+bn,bn+"~"+bq);bv.newFlag(bz,bn+"~"+bq,"v"+bn);bv.newFlag(bz,"v"+bn,bn+"~"+bk);bv.newFlag(bz,bn+"~"+bk,bq+"~"+bn);bg=[bn,bk],bq=bg[0],bn=bg[1]}}bt=bv.topoly();bt.name="p"+br.name;return bt};p=function(bi){var bg,bh,bj;console.log("Taking reflection of "+bi.name+"...");for(bg=0,bh=bi.xyz.length-1;0<=bh?bg<=bh:bg>=bh;0<=bh?bg++:bg--){bi.xyz[bg]=b(-1,bi.xyz[bg])}for(bg=0,bj=bi.face.length-1;0<=bj?bg<=bj:bg>=bj;0<=bj?bg++:bg--){bi.face[bg]=bi.face[bg].reverse()}bi.name="r"+bi.name;return bi};az=function(bt){var bB,bH,bA,bu,by,bz,bx,bw,bs,bp,bq,bn,bl,bj,bF,bG,bE,bD,bC,bh,bv,br,bo,bm,bk,bi,bg;console.log("Taking dual of "+bt.name+"...");by=new ab();bu=[];for(bz=0,bv=bt.xyz.length-1;0<=bv?bz<=bv:bz>=bv;0<=bv?bz++:bz--){bu[bz]={}}br=F(bt.face);for(bq=0,bF=br.length;bq<bF;bq++){bo=br[bq],bz=bo[0],bA=bo[1];bs=bA[bA.length-1];for(bn=0,bG=bA.length;bn<bG;bn++){bp=bA[bn];bu[bs]["v"+bp]=""+bz;bs=bp}}bB=bt.centers();for(bz=0,bm=bt.face.length-1;0<=bm?bz<=bm:bz>=bm;0<=bm?bz++:bz--){by.newV(""+bz,bB[bz])}bk=F(bt.face);for(bl=0,bE=bk.length;bl<bE;bl++){bi=bk[bl],bz=bi[0],bA=bi[1];bs=bA[bA.length-1];for(bj=0,bD=bA.length;bj<bD;bj++){bp=bA[bj];by.newFlag(bs,bu[bp]["v"+bs],""+bz);bs=bp}}bH=by.topoly();bw=[];bg=bH.face;for(bh=0,bC=bg.length;bh<bC;bh++){bA=bg[bh];bx=A(bt.face[bA[0]],bt.face[bA[1]],bt.face[bA[2]]);bw[bx]=bA}bH.face=bw;if(bt.name[0]!=="d"){bH.name="d"+bt.name}else{bH.name=bt.name.slice(1)}return bH};z=function(bt,bz){var bD,bC,bA,bI,bs,bB,bv,bx,by,bw,br,bo,bp,bm,bk,bi,bH,bJ,bG,bF,bE,bg,bu,bq,bn,bl,bj,bh;console.log("Taking inset of "+(bz===0?"":bz)+"-sided faces of "+bt.name+"...");bA=new ab();bu=F(bt.xyz);for(bp=0,bH=bu.length;bp<bH;bp++){bq=bu[bp],bB=bq[0],by=bq[1];bA.newV("v"+bB,by)}bx=bt.normals();bD=bt.centers();bn=F(bt.face);for(bm=0,bJ=bn.length;bm<bJ;bm++){bl=bn[bm],bB=bl[0],bC=bl[1];if(bC.length===bz||bz===0){for(bk=0,bG=bC.length;bk<bG;bk++){bw=bC[bk];bA.newV("f"+bB+"v"+bw,u(aL(bt.xyz[bw],bD[bB]),b(-0.2,bx[bB])))}}}bs=false;bj=F(bt.face);for(bi=0,bF=bj.length;bi<bF;bi++){bh=bj[bi],bB=bh[0],bC=bh[1];br="v"+bC[bC.length-1];for(bg=0,bE=bC.length;bg<bE;bg++){bw=bC[bg];bo="v"+bw;if(bC.length===bz||bz===0){bs=true;bI=bB+br;bA.newFlag(bI,br,bo);bA.newFlag(bI,bo,"f"+bB+bo);bA.newFlag(bI,"f"+bB+bo,"f"+bB+br);bA.newFlag(bI,"f"+bB+br,br);bA.newFlag("ex"+bB,"f"+bB+br,"f"+bB+bo)}else{bA.newFlag(bB,br,bo)}br=bo}}if(!bs){console.log("No "+bz+"-fold components were found.")}bv=bA.topoly();bv.name="n"+(bz===0?"":bz)+bt.name;return bv};U=function(bt,bz){var bD,bC,bA,bs,bB,bv,bx,by,bw,br,bo,bp,bm,bk,bi,bH,bI,bG,bF,bE,bg,bu,bq,bn,bl,bj,bh;console.log("Taking extrusion of "+(bz===0?"":bz)+"-sided faces of "+bt.name+"...");bA=new ab();bu=F(bt.xyz);for(bp=0,bH=bu.length;bp<bH;bp++){bq=bu[bp],bB=bq[0],by=bq[1];bA.newV("v"+bB,by)}bx=bt.normals();bD=bt.centers();bn=F(bt.face);for(bm=0,bI=bn.length;bm<bI;bm++){bl=bn[bm],bB=bl[0],bC=bl[1];if(bC.length===bz||bz===0){for(bk=0,bG=bC.length;bk<bG;bk++){bw=bC[bk];bA.newV("f"+bB+"v"+bw,u(bt.xyz[bw],b(0.3,bx[bB])))}}}bs=false;bj=F(bt.face);for(bi=0,bF=bj.length;bi<bF;bi++){bh=bj[bi],bB=bh[0],bC=bh[1];br="v"+bC[bC.length-1];for(bg=0,bE=bC.length;bg<bE;bg++){bw=bC[bg];bo="v"+bw;if(bC.length===bz||bz===0){bs=true;bA.newFlag(bB+br,br,bo);bA.newFlag(bB+br,bo,"f"+bB+bo);bA.newFlag(bB+br,"f"+bB+bo,"f"+bB+br);bA.newFlag(bB+br,"f"+bB+br,br);bA.newFlag("ex"+bB,"f"+bB+br,"f"+bB+bo)}else{bA.newFlag(bB,br,bo)}br=bo}}if(!bs){console.log("No "+bz+"-fold components were found.")}bv=bA.topoly();bv.name="x"+(bz===0?"":bz)+bt.name;console.log(bv);return bv};aP=function(bt){var bE,bD,bB,bC,by,bA,bz,bq,bF,bo,bs,br,bl,bw,bv,bu,bn,bk,bi,bH,bI,bG,bx,bp,bm,bj,bh,bg;console.log("Taking stella of "+bt.name+"...");bE=bt.centers();bB=new ab();bx=F(bt.xyz);for(bn=0,bH=bx.length;bn<bH;bn++){bp=bx[bn],bC=bp[0],bA=bp[1];bB.newV("v"+bC,bA)}bm=F(bt.face);for(bk=0,bI=bm.length;bk<bI;bk++){bj=bm[bk],bC=bj[0],bD=bj[1];bq="v"+bD[bD.length-2];bo="v"+bD[bD.length-1];bw=bt.xyz[bD[bD.length-2]];bv=bt.xyz[bD[bD.length-1]];for(bi=0,bG=bD.length;bi<bG;bi++){bz=bD[bi];bl="v"+bz;bu=bt.xyz[bz];bF=bq+"~"+bo;bs=bo+"~"+bq;br=bo+"~"+bl;bB.newV(bF,aL(aL(bw,bv),bE[bC]));bB.newFlag("in"+bC,bF,br);bB.newFlag("f"+bC+bo,br,bF);bB.newFlag("f"+bC+bo,bF,bo);bB.newFlag("f"+bC+bo,bo,br);bB.newFlag("f"+bF,bq,bs);bB.newFlag("f"+bF,bs,bF);bB.newFlag("f"+bF,bF,bq);bh=[bo,bl],bq=bh[0],bo=bh[1];bg=[bv,bu],bw=bg[0],bv=bg[1]}}by=bB.topoly();by.name="*"+bt.name;return by};T=function(bj,bi){var bn,bl,bk,bg,bo,bh,bm;bn=0.1;bg=aW(bj);for(bh=0,bm=bi.length;bh<bm;bh++){bk=bi[bh];bo=g(bg[bk[0]],bg[bk[1]]);bl=b(bn*1/2*(1-O(y(bo,bo))),bo);bg[bk[0]]=u(bg[bk[0]],bl);bg[bk[1]]=u(bg[bk[1]],bl)}return bg};a1=function(bk,bj){var bn,bl,bg,bh,bo,bi,bm;bg=(function(){var bs,bq,br,bp;bp=[];for(bs=0,bq=bj.length;bs<bq;bs++){br=bj[bs],bn=br[0],bl=br[1];bp.push(g(bk[bn],bk[bl]))}return bp})();bh=[0,0,0];for(bi=0,bm=bg.length;bi<bm;bi++){bo=bg[bi];bh=u(bh,bo)}bh=b(1/bj.length,bh);return _.map(bk,function(bp){return a6(bp,bh)})};w=function(bj){var bg,bi,bh;bi=[0,0,0];bg=_.max(_.map(bj,function(bk){return D(bk)}));bh=1/bg;return _.map(bj,function(bk){return[bh*bk[0],bh*bk[1],bh*bk[2]]})};a5=function(bm,bj){var br,bo,bq,bn,bi,bg,bs,bl,bk,bp,bh;br=0.1;bg=aW(bm);for(bl=0,bp=bj.length;bl<bp;bl++){bn=bj[bl];bq=(function(){var bv,bt,bu;bu=[];for(bv=0,bt=bn.length;bv<bt;bv++){bs=bn[bv];bu.push(bm[bs])}return bu})();bi=ad(bq);bo=a9(bq);if(y(bi,bo)<0){bi=b(-1,bi)}for(bk=0,bh=bn.length;bk<bh;bk++){bs=bn[bk];bg[bs]=u(bg[bs],b(y(b(br,bi),a6(bo,bm[bs])),bi))}}return bg};j=function(bm,bl){var bh,bg,bj,bk,bi,bn;console.log("Canonicalizing "+bm.name+"...");bg=bm.face;bh=bm.getEdges();bi=bm.xyz;bk=1;for(bj=0;0<=bl?bj<=bl:bj>=bl;0<=bl?bj++:bj--){bn=aW(bi);bi=T(bi,bh);bi=a1(bi,bh);bi=a5(bi,bg);bk=_.max(_.map(_.zip(bi,bn),function(bp){var bo,bq;bo=bp[0],bq=bp[1];return D(a6(bo,bq))}));if(bk<1e-8){break}}console.log("[canonicalization done, last |deltaV|="+bk+"]");return bi};I=function(bj){var bk,bh,bi,bg;bh=bj.centers();for(bi=0,bg=bh.length;bi<bg;bi++){bk=bh[bi];bk=b(1/y(bk,bk),bk)}return bh};B=function(bi){var bw,bq,bj,br,bg,bp,bv,bu,bs,bn,bm,bt,bh,bo,bl,bk;bw=[];bo=bi.face;for(bn=0,bt=bo.length;bn<bt;bn++){br=bo[bn];bj=[0,0,0];bg=[0,0,0];bq=0;bl=br.slice(-2),bv=bl[0],bu=bl[1];for(bm=0,bh=br.length;bm<bh;bm++){bs=br[bm];bj=u(bj,bi.xyz[bs]);bg=u(bg,aM(bi.xyz[bv],bi.xyz[bu],bi.xyz[bs]));bq+=am(bi.xyz[bv],bi.xyz[bu]);bk=[bu,bs],bv=bk[0],bu=bk[1]}bj=b(1/br.length,bj);bg=ba(bg);bq=bq/br.length;bp=at(b(y(bj,bg),bg));bw.push(b((1+bq)/2,bp))}return bw};d=function(bk,bh){var bi,bg,bj;bg=az(bk);console.log("Pseudo-canonicalizing "+bk.name+"...");for(bi=0,bj=bh-1;0<=bj?bi<=bj:bi>=bj;0<=bj?bi++:bi--){bg.xyz=B(bk);bk.xyz=B(bg)}return bk.xyz};t=function(bk,bh){var bi,bg,bj;bg=az(bk);console.log("Planarizing "+bk.name+"...");for(bi=0,bj=bh-1;0<=bj?bi<=bj:bi>=bj;0<=bj?bi++:bi--){bg.xyz=I(bk);bk.xyz=I(bg)}return bk.xyz};aa=function(bg){var bl,bm,bo,bj,bi,bn,bh,bk;bm="";bk=bg.face;for(bj=0,bn=bk.length;bj<bn;bj++){bl=bk[bj];for(bi=0,bh=bl.length;bi<bh;bi++){bo=bl[bi];bm+=""+bo+"->"}bm+="\n"}return console.log(bm)};x=function(){var bn,bk,bj,bi,bm,bl,bh,bg;bi=["T","O","C","I","D","P3","P4","A4","A5","Y3","Y4"];bk=["k","a","g","p","d","n","x","*"];console.log("===== Test Basic Ops =====");for(bm=0,bh=bk.length;bm<bh;bm++){bn=bk[bm];console.log("Operator "+bn);for(bl=0,bg=bi.length;bl<bg;bl++){bj=bi[bl];console.log(bn+bj+":",Z(bn+bj))}}return console.log("===== Done Testing Basic Ops =====")};W={};bb=600;aq=300;J={};f=E(q);ae=E(q);N=500;v=5;bc=0;G=0.8;k=bb/2;an=aq/2;r=new Date();m=true;aJ="rgba(255,255,255,1.0)";ag="area";a4=0.5;ah=false;Q=0;P=0;ax=[1,0,0];aV=["dakD","opD","lT","lQ5oC","knD","dn6x4Q5bT"];av=function(bi,bg){var bj,bh;bj=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;bh=new bj();bh.append(bi);return saveAs(bh.getBlob("text/plain;charset="+document.characterSet),bg)};aj=["#ff3333","#33ff33","#3333ff","#ffff33","#ff33ff","#33ffff","#dddddd","#555555","#dd0000","#00dd00","#0000dd"];aH=["#ff8888","#dddddd","#777777","#aa3333","#ff0000","#ffffff","#aaaaaa"];h=["#ff8888","#ffeeee","#88ff88","#dd7777","#ff2222","#22ff22","#ee4422","#aaaaaa"];bf=function(bh){var bg;if(bh[0]==="#"){bh=bh.slice(1)}if(bh.length===3){bg=bh.split("").map(function(bi){return parseInt(bi+bi,16)/255})}else{bg=bh.match(/.{2}/g).map(function(bi){return parseInt(bi,16)/255})}return bg};aR=aH;Y=function(bg){if(bg<aR.length){return bf(aR[bg])}else{return bf(aR[aR.length-1])}};aO=function(bg,bj){var bh,bi;bi=R(100*bg);if(bi in bj){return bj[bi]}else{bh=Y(_.toArray(bj).length);bj[bi]=bh;return bh}};K=function(bg){var bo,bk,bj,bm,bn,bh,bl,bi;bg.face_colors=[];bk={};bi=bg.face;for(bh=0,bl=bi.length;bh<bl;bh++){bj=bi[bh];if(ag==="area"){bm=(function(){var br,bp,bq;bq=[];for(br=0,bp=bj.length;br<bp;br++){bn=bj[br];bq.push(bg.xyz[bn])}return bq})();bo=aO(a8(bm),bk)}else{bo=Y(bj.length-3)}bg.face_colors.push(bo)}return bg};aF=[[/e/g,"aa"],[/b/g,"ta"],[/o/g,"jj"],[/m/g,"kj"],[/t(\d*)/g,"dk$1d"],[/j/g,"dad"],[/s/g,"dgd"],[/dd/g,""],[/ad/g,"a"],[/gd/g,"g"],[/aO/g,"aC"],[/aI/g,"aD"],[/gO/g,"gC"],[/gI/g,"gD"]];aS=function(bj){var bg,bi,bm,bl,bh,bk;bi=bj;for(bl=0,bh=aF.length;bl<bh;bl++){bk=aF[bl],bm=bk[0],bg=bk[1];bi=bi.replace(bm,bg)}console.log(""+bj+" executed as "+bi);return bi};Z=function(bh){var bj,bg,bi;bi=new aG();bj=0;bg=aS(bh);if(bg.search(/([0-9]+)$/)!==-1){bj=1*RegExp.lastParen;bg=bg.slice(0,-RegExp.lastParen.length)}switch(bg.slice(-1)){case"T":bi=c();break;case"O":bi=ak();break;case"C":bi=ac();break;case"I":bi=aY();break;case"D":bi=ai();break;case"P":bi=M(bj);break;case"A":bi=aN(bj);break;case"Y":bi=be(bj);break;default:return}while(bg!==""){bj=0;if(bg.search(/([0-9]+)$/)!==-1){bj=1*RegExp.lastParen;bg=bg.slice(0,-RegExp.lastParen.length)}switch(bg.slice(-1)){case"d":bi=az(bi);break;case"k":bi=V(bi,bj);break;case"a":bi=ay(bi);break;case"g":bi=aU(bi);break;case"p":bi=o(bi);break;case"r":bi=p(bi);break;case"K":bi.xyz=d(bi,bj===0?1:bj);break;case"C":bi.xyz=j(bi,bj===0?1:bj);break;case"A":bi.xyz=t(bi,bj===0?1:bj);break;case"n":bi=z(bi,bj);break;case"x":bi=U(bi,bj);break;case"l":bi=aP(bi,bj)}bg=bg.slice(0,-1)}bi.xyz=a1(bi.xyz,bi.getEdges());bi.xyz=w(bi.xyz);bi=K(bi);return bi};bd=function(){var bg,bl,bk,bj,bi,bh;bh={};bg=/\+/g;bi=/([^&=]+)=?([^&]*)/g;bl=function(bm){return decodeURIComponent(bm.replace(bg," "))};bj=window.location.search.substring(1);while(bk=bi.exec(bj)){bh[bl(bk[1])]=bl(bk[2])}return bh};aB=function(){var bg;bg=$("#poly");bg.width(bb);bg.height(aq);W=bg[0].getContext("2d");W.lineWidth=a4;if(m){return W.clearRect(0,0,bb,aq)}else{W.clearRect(0,0,bb,aq);W.fillStyle=aJ;return W.fillRect(0,0,bb,aq)}};aD=function(){if(m){return W.clearRect(0,0,bb,aq)}else{W.clearRect(0,0,bb,aq);W.fillStyle=aJ;return W.fillRect(0,0,bb,aq)}};aI=function(bl){var bk,bg,bm,bj,bi,bh;bk=bl.centers();bm=_.zip(bk,(function(){bh=[];for(var bo=0,bn=bl.face.length-1;0<=bn?bo<=bn:bo>=bn;0<=bn?bo++:bo--){bh.push(bo)}return bh}).apply(this)).sort(function(bo,bn){return bo[0][2]-bn[0][2]}).map(function(bn){return bn[1]});bl.face=(function(){var bp,bn,bo;bo=[];for(bp=0,bn=bm.length;bp<bn;bp++){bg=bm[bp];bo.push(bl.face[bg])}return bo})();return bl.face_colors=(function(){var bp,bn,bo;bo=[];for(bp=0,bn=bm.length;bp<bn;bp++){bg=bm[bp];bo.push(bl.face_colors[bg])}return bo})()};L=function(bp,bx){var bj,br,bq,bw,bm,bn,bv,bo,bu,bs,bk,bh,by,bz,bt,bl,bi,bg;bx||(bx=[3,3,3]);bn=_.map(bp.xyz,function(bA){return bA});bp.xyz=_.map(bp.xyz,function(bA){return n(f,bA)});aI(bp);bt=F(bp.face);for(bk=0,by=bt.length;bk<by;bk++){bl=bt[bk],bw=bl[0],br=bl[1];W.beginPath();bo=br[br.length-1];bi=s(u(bx,bp.xyz[bo]),v,bc,G,N),bu=bi[0],bs=bi[1];W.moveTo(bu+k,bs+an);for(bh=0,bz=br.length;bh<bz;bh++){bv=br[bh];bg=s(u(bx,bp.xyz[bv]),v,bc,G,N),bu=bg[0],bs=bg[1];W.lineTo(bu+k,bs+an)}bj=bp.face_colors[bw];bq=(function(){var bB,bC,bA;bA=[];for(bB=0,bC=br.length;bB<bC;bB++){bv=br[bB];bA.push(bp.xyz[bv])}return bA})();bm=y(ad(bq),ba([1,-1,0]));bj=b((bm/2+0.5)*0.7+0.3,bj);W.fillStyle="rgba("+(R(bj[0]*255))+", "+(R(bj[1]*255))+", "+(R(bj[2]*255))+", "+1+")";W.fill();W.stroke()}return bp.xyz=bn};$(function(){var bh,bg;aB();bg=bd();if("recipe" in bg){bh=[bg.recipe];$("#spec").val(bh)}else{bh=[a3(aV)];$("#spec").val(bh)}J=_.map(bh,function(bi){return Z(bi)});ar();$("#spec").change(function(bi){bh=$("#spec").val().split(/\s+/g).slice(0,2);J=_.map(bh,function(bj){return Z(bj)});window.location.replace("?recipe="+bh[0]);return ar()});$("#poly").mousewheel(function(bk,bl,bj,bi){bk.preventDefault();N*=(10+bl)/10;return ar()});$("#poly").mousedown(function(bi){var bj;bi.preventDefault();ah=true;Q=bi.clientX-$(this).offset().left;P=bi.clientY-$(this).offset().top;bj=aC(Q,P,k,an,v,bc,G,N);if(bj[0]*bj[1]*bj[2]*0===0){ax=bj}return ae=E(f)});$("#poly").mouseup(function(bi){bi.preventDefault();return ah=false});$("#poly").mouseleave(function(bi){bi.preventDefault();return ah=false});$("#poly").mousemove(function(bl){var bj,bi,bk;bl.preventDefault();if(ah){bj=bl.clientX-$(this).offset().left;bi=bl.clientY-$(this).offset().top;bk=aC(bj,bi,k,an,v,bc,G,N);if(bk[0]*bk[1]*bk[2]*0===0&&ax[0]*ax[1]*ax[2]*0===0){f=aw(au(ax,bk),ae)}return ar()}});$("#siderot").click(function(bi){f=aK(aA/2,0,1,0);return ar()});$("#toprot").click(function(bi){f=aK(aA/2,1,0,0);return ar()});$("#frontrot").click(function(bi){f=e(0,0,0);return ar()});$("#pngsavebutton").click(function(bl){var bk,bj,bi;bk=$("#poly")[0];bi=$("#spec").val().split(/\s+/g)[0];bj="polyhedronisme-"+bi+".png";return bk.toBlob(function(bm){return saveAs(bm,bj)})});$("#objsavebutton").click(function(bl){var bj,bk,bi;bk=J[0].toOBJ();bi=$("#spec").val().split(/\s+/g)[0];bj="polyhedronisme-"+bi+".obj";return av(bk,bj)});return $("#x3dsavebutton").click(function(bk){var bj,bi,bl;bl=J[0].toX3D();bi=$("#spec").val().split(/\s+/g)[0];bj="polyhedronisme-"+bi+".x3d";return av(bl,bj)})});a7=function(){var bh,bi,bl,bk,bg,bj,bm;aD();bh=(2*Math.PI)/180*r.getSeconds()*0.1;bj=F(J);for(bk=0,bg=bj.length;bk<bg;bk++){bm=bj[bk],bi=bm[0],bl=bm[1];L(bl,[0+3*bi,0,3])}return setTimeout(a7,100)};ar=function(){var bi,bl,bk,bh,bj,bm,bg;aD();bj=F(J);bg=[];for(bk=0,bh=bj.length;bk<bh;bk++){bm=bj[bk],bi=bm[0],bl=bm[1];bg.push(L(bl,[0+3*bi,0,3]))}return bg}}).call(this);