(function(){var s,a1,aE,bw,au,m,bd,ab,aa,aK,av,a9,aO,h,aj,bb,C,B,aM,br,a5,bB,S,aD,bu,g,o,aR,P,a6,bt,be,M,aC,bh,aU,aX,ai,bn,ap,ay,w,ax,G,aF,W,aN,aA,aL,a,Q,ag,y,bj,I,at,al,N,ba,aH,U,j,ar,z,bc,bD,bi,aP,H,J,aQ,x,ah,O,bf,ao,a3,aJ,e,t,aq,aw,L,bA,az,a4,V,ak,bz,A,R,D,bx,Y,bp,by,an,aW,bk,X,ad,u,bC,aS,bm,bl,aG,T,K,v,E,i,ac,aY,l,aI,a8,a0,aV,Z,a7,bq,c,k,ae,F,f,am,b,af,n,bg,bo,bv,aZ,a2,d,q,p,aB,r;var aT=Object.prototype.hasOwnProperty,bs=Array.prototype.indexOf||function(bG){for(var bF=0,bE=this.length;bF<bE;bF++){if(aT.call(this,bF)&&this[bF]===bG){return bF}}return -1};aS=Math.random;ac=Math.round;at=Math.floor;Z=Math.sqrt;a8=Math.sin;M=Math.cos;c=Math.tan;S=Math.asin;bb=Math.acos;aD=Math.atan;bk=Math.pow;aj=Math.abs;aO=Math.PI;Q=function(bF){var bG,bH,bE;bE=[];for(bG=0,bH=bF.length-1;0<=bH?bG<=bH:bG>=bH;0<=bH?bG++:bG--){bE.push([bG,bF[bG]])}return bE};P=function(bG){var bF,bE;if(!(bG!=null)||typeof bG!=="object"){return bG}bE=new bG.constructor();for(bF in bG){bE[bF]=P(bG[bF])}return bE};bm=function(bF){var bE;bE=at(aS()*bF.length);return bF[bE]};e=function(bF,bE){return[bF*bE[0],bF*bE[1],bF*bE[2]]};r=function(bF,bE){return[bF[0]*bE[0],bF[1]*bE[1],bF[2]*bE[2]]};C=function(bF,bE){return[bF[0]+bE[0],bF[1]+bE[1],bF[2]+bE[2]]};bq=function(bF,bE){return[bF[0]-bE[0],bF[1]-bE[1],bF[2]-bE[2]]};G=function(bF,bE){return bF[0]*bE[0]+bF[1]*bE[1]+bF[2]*bE[2]};aC=function(bF,bE){return[bF[1]*bE[2]-bF[2]*bE[1],bF[2]*bE[0]-bF[0]*bE[2],bF[0]*bE[1]-bF[1]*bE[0]]};O=function(bE){return Z(G(bE,bE))};bf=function(bE){return G(bE,bE)};bv=function(bE){return e(1/Z(bf(bE)),bE)};a3=function(bF,bE){return e(1/2,C(bF,bE))};n=function(bG,bF,bE){return[(1-bE)*bG[0]+bE*bF[0],(1-bE)*bG[1]+bE*bF[1],(1-bE)*bG[2]+bE*bF[2]]};az=function(bF,bE){return n(bF,bE,1/3)};aG=function(bE){return e(1/bf(bE),bE)};k=function(bG,bF){var bE;bE=bq(bF,bG);return bq(bG,e(G(bE,bG)/bf(bE),bE))};aA=function(bF,bE){return Z(bf(k(bF,bE)))};a4=function(bI,bH,bG){var bF,bE;bF=bq(bH,bI);bE=bq(bG,bH);return aC(bF,bE)};J=function(bL,bK,bJ){var bP,bO,bN,bI,bH,bG,bM,bF,bE;for(bI=0,bM=bL.length;bI<bM;bI++){bP=bL[bI];for(bH=0,bF=bK.length;bH<bF;bH++){bO=bK[bH];if(bP===bO){for(bG=0,bE=bJ.length;bG<bE;bG++){bN=bJ[bG];if(bP===bN){return bP}}}}}return null};bu=function(bI){var bG,bF,bH,bE;bG=[0,0,0];for(bH=0,bE=bI.length;bH<bE;bH++){bF=bI[bH];bG=C(bG,bF)}return e(1/bI.length,bG)};aq=function(bI){var bE,bM,bK,bJ,bG,bL,bH,bF;bE=[0,0,0];bH=bI.slice(-2),bM=bH[0],bK=bH[1];for(bG=0,bL=bI.length;bG<bL;bG++){bJ=bI[bG];bE=C(bE,a4(bM,bK,bJ));bF=[bK,bJ],bM=bF[0],bK=bF[1]}return bv(bE)};bt=function(bI){var bE,bM,bK,bJ,bG,bL,bH,bF;bE=0;bH=bI.slice(0,2),bM=bH[0],bK=bH[1];bF=bI.slice(2);for(bG=0,bL=bF.length;bG<bL;bG++){bJ=bF[bG];bE+=O(aC(bq(bK,bM),bq(bJ,bM)));bK=bJ}return bE};ad=function(bL){var bJ,bF,bE,bI,bM,bN,bH,bK,bG;bI=P(bL);bN=bL[0];bI=_.map(bI,function(bO){return bO-bN});bF=aq(bL);bJ=bv(bu(bL));bE=aC(bF,bJ);bG=[];for(bH=0,bK=bI.length;bH<bK;bH++){bM=bI[bH];bG.push([G(bF,bM),G(bE,bM)])}return bG};be=function(bG){var bF,bE,bH;bE=new Array(bG.length);for(bF=0,bH=bG.length-1;0<=bH?bF<=bH:bF>=bH;0<=bH?bF++:bF--){bE[bF]=bG[bF].slice(0)}return bE};t=function(bF,bE){return[bF[0][0]*bE[0]+bF[0][1]*bE[1]+bF[0][2]*bE[2],bF[1][0]*bE[0]+bF[1][1]*bE[1]+bF[1][2]*bE[2],bF[2][0]*bE[0]+bF[2][1]*bE[1]+bF[2][2]*bE[2]]};aJ=function(bE,bF){return[[bE[0][0]*bF[0][0]+bE[0][1]*bF[1][0]+bE[0][2]*bF[2][0],bE[0][0]*bF[0][1]+bE[0][1]*bF[1][1]+bE[0][2]*bF[2][1],bE[0][0]*bF[0][2]+bE[0][1]*bF[1][2]+bE[0][2]*bF[2][2]],[bE[1][0]*bF[0][0]+bE[1][1]*bF[1][0]+bE[1][2]*bF[2][0],bE[1][0]*bF[0][1]+bE[1][1]*bF[1][1]+bE[1][2]*bF[2][1],bE[1][0]*bF[0][2]+bE[1][1]*bF[1][2]+bE[1][2]*bF[2][2]],[bE[2][0]*bF[0][0]+bE[2][1]*bF[1][0]+bE[2][2]*bF[2][0],bE[2][0]*bF[0][1]+bE[2][1]*bF[1][1]+bE[2][2]*bF[2][1],bE[2][0]*bF[0][2]+bE[2][1]*bF[1][2]+bE[2][2]*bF[2][2]]]};y=[[1,0,0],[0,1,0],[0,0,1]];i=function(bI,bG,bH){var bJ,bF,bE;bJ=[[M(bI),-1*a8(bI),0],[a8(bI),M(bI),0],[0,0,1]];bE=[[M(bG),0,-1*a8(bG)],[0,1,0],[a8(bG),0,M(bG)]];bF=[[1,0,0],[0,M(bH),-1*a8(bH)],[0,a8(bH),M(bH)]];return aJ(bF,aJ(bE,bJ))};a2=function(bI,bR,bP,bM){var bL,bF,bG,bQ,bO,bE,bN,bJ,bK,bH;bI/=2;bQ=a8(bI);bL=M(bI);bO=bQ*bQ;bF=O([bR,bP,bM]);if(bF===0){bK=[0,0,1],bR=bK[0],bP=bK[1],bM=bK[2]}if(bF!==1){bH=bv([bR,bP,bM]),bR=bH[0],bP=bH[1],bM=bH[2]}if(bR===1&&bP===0&&bM===0){bG=[[1,0,0],[0,1-2*bO,2*bQ*bL],[0,-2*bQ*bL,1-2*bO]]}else{if(bR===0&&bP===1&&bM===0){bG=[[1-2*bO,0,-2*bQ*bL],[0,1,0],[2*bQ*bL,0,1-2*bO]]}else{if(bR===0&&bP===0&&bM===1){bG=[[1-2*bO,2*bQ*bL,0],[-2*bQ*bL,1-2*bO,0],[0,0,1]]}else{bE=bR*bR;bN=bP*bP;bJ=bM*bM;bG=[[1-2*(bN+bJ)*bO,2*(bR*bP*bO+bM*bQ*bL),2*(bR*bM*bO-bP*bQ*bL)],[2*(bP*bR*bO-bM*bQ*bL),1-2*(bJ+bE)*bO,2*(bP*bM*bO+bR*bQ*bL)],[2*(bM*bR*bO+bP*bQ*bL),2*(bM*bP*bO-bR*bQ*bL),1-2*(bE+bN)*bO]]}}}return bG};A=function(bG,bF,bH,bK,bE){var bI,bJ;bJ=(bF*bK-bH)/(1-bK);bI=bE*bK/(1-bK);return[bI*bG[0]/(bG[2]+bJ),bI*bG[1]/(bG[2]+bJ)]};aQ=function(bL,bI,bO,bM,bS,bH,bG,bF){var bR,bE,bN,bJ,bP,bU,bW,bK,bQ,bT,bV;bQ=(bS*bG-bH)/(1-bG);bR=bF*bG/(1-bG);bN=bL-bO;bU=bI-bM;bE=bR*bR;bT=bQ*bQ;bJ=bN*bN;bW=bU*bU;bP=(2*bR*bN*bQ+Z(4*bE*bJ*bT+4*bJ*(bE+bJ+bW)*(1-bT)))/(2*(bE+bJ+bW));bK=(bR*bU*bQ)/(bE+bJ+bW)+(bU*Z(4*bE*bT+4*(bE+bJ+bW)*(1-bT)))/(2*(bE+bJ+bW));bV=Z(1-bP*bP-bK*bK);return[bP,bK,bV]};aH=function(bG,bF){var bH,bE;bE=aC(bG,bF);bH=bb(G(bG,bF));return a2(-1*bH,bE[0],bE[1],bE[2])};bj=function(bH){var bF,bJ,bI,bG,bE;bF=[];bJ=bH.slice(-1)[0];for(bG=0,bE=bH.length;bG<bE;bG++){bI=bH[bG];bF.push([bJ,bI]);bJ=bI}return bF};d=function(bF){var bL,bK,bO,bM,bI,bH,bN,bE,bJ,bG;bM=[];bJ=Q(bF.face);for(bI=0,bN=bJ.length;bI<bN;bI++){bG=bJ[bI],bK=bG[0],bL=bG[1];for(bH=0,bE=bL.length;bH<bE;bH++){bO=bL[bH];bM[bO]=bF.face_colors[bK]}}return bM};aW=(function(){function bE(){this.face=new Array();this.xyz=new Array();this.name="null polyhedron"}bE.prototype.data=function(){var bF;bF=this.face.length+this.xyz.length-2;return"("+this.face.length+" faces, "+bF+" edges, "+this.xyz.length+" vertices)"};bE.prototype.getEdges=function(){var bP,bL,bN,bM,bG,bK,bJ,bQ,bI,bH,bO,bF;bK={};bQ=[];bL=_.map(this.face,bj);for(bI=0,bO=bL.length;bI<bO;bI++){bG=bL[bI];for(bH=0,bF=bG.length;bH<bF;bH++){bM=bG[bH];if(bM[0]<bM[1]){bP=bM[0],bN=bM[1]}else{bN=bM[0],bP=bM[1]}bK[bP+"~"+bN]=bM}}for(bJ in bK){bM=bK[bJ];bQ.push(bM)}return bQ};bE.prototype.centers=function(){var bK,bL,bH,bN,bI,bG,bM,bF,bJ;bK=[];bJ=this.face;for(bI=0,bM=bJ.length;bI<bM;bI++){bL=bJ[bI];bH=[0,0,0];for(bG=0,bF=bL.length;bG<bF;bG++){bN=bL[bG];bH=C(bH,this.xyz[bN])}bK.push(e(1/bL.length,bH))}return bK};bE.prototype.normals=function(){var bJ,bK,bG,bI,bF,bH;bK=[];bH=this.face;for(bI=0,bF=bH.length;bI<bF;bI++){bJ=bH[bI];bK.push(aq((function(){var bN,bL,bM;bM=[];for(bN=0,bL=bJ.length;bN<bL;bN++){bG=bJ[bN];bM.push(this.xyz[bG])}return bM}).call(this)))}return bK};bE.prototype.rescale=function(bF){this.xyz=E(this.xyz,bF);return this};bE.prototype.translate=function(bF){this.xyz=_.map(this.xyz,function(bG){return[bG[0]+bF[0],bG[1]+bF[1],bG[2]+bF[2]]});return this};bE.prototype.toOBJ=function(){var bR,bQ,bG,bS,bU,bO,bN,bM,bK,bT,bH,bF,bV,bP,bL,bJ,bI;bS="#Produced by polyHÃ©dronisme http://levskaya.github.com/polyhedronisme\n";bS+="group "+this.name+"\n";bS+="#vertices\n";bP=this.xyz;for(bO=0,bT=bP.length;bO<bT;bO++){bU=bP[bO];bS+="v "+bU[0]+" "+bU[1]+" "+bU[2]+"\n"}bS+="#normal vector defs \n";bL=this.face;for(bN=0,bH=bL.length;bN<bH;bN++){bR=bL[bN];bG=aq((function(){var bX,bY,bW;bW=[];for(bX=0,bY=bR.length;bX<bY;bX++){bU=bR[bX];bW.push(this.xyz[bU])}return bW}).call(this));bS+="vn "+bG[0]+" "+bG[1]+" "+bG[2]+"\n"}bS+="#face defs \n";bJ=Q(this.face);for(bM=0,bF=bJ.length;bM<bF;bM++){bI=bJ[bM],bQ=bI[0],bR=bI[1];bS+="f ";for(bK=0,bV=bR.length;bK<bV;bK++){bU=bR[bK];bS+=""+(bU+1)+"//"+(bQ+1)+" "}bS+="\n"}return bS};bE.prototype.toX3D=function(){var bJ,bU,bP,bR,bS,bN,bM,bL,bI,bQ,bG,bF,bT,bO,bK,bH;bJ=0.01;bS='<?xml version="1.0" encoding ="UTF-8"?>\n<X3D profile="Interchange" version="3.0">\n<head>\n<component name="Rendering" level="3"/>\n<meta name="generator" content="Polyhedronisme"/>\n<meta name="version" content="0.1.0"/>\n</head>\n<Scene>\n<Shape>\n<IndexedFaceSet normalPerVertex="false" coordIndex="';bO=this.face;for(bN=0,bQ=bO.length;bN<bQ;bN++){bP=bO[bN];for(bM=0,bG=bP.length;bM<bG;bM++){bR=bP[bM];bS+=""+bR+" "}bS+="-1\n"}bS+='">\n';bS+='<Color color="';bK=d(this);for(bL=0,bF=bK.length;bL<bF;bL++){bU=bK[bL];bS+=""+bU[0]+" "+bU[1]+" "+bU[2]+" "}bS+='"/>';bS+='<Coordinate point="';bH=this.xyz;for(bI=0,bT=bH.length;bI<bT;bI++){bR=bH[bI];bS+=""+(bR[0]*bJ)+" "+(bR[1]*bJ)+" "+(bR[2]*bJ)+" "}bS+='"/>\n';bS+="</IndexedFaceSet>\n</Shape>\n</Scene>\n</X3D>";return bS};bE.prototype.toVRML=function(){var bJ,bU,bP,bR,bS,bN,bM,bL,bI,bQ,bG,bF,bT,bO,bK,bH;bJ=0.01;bS='#VRML V2.0 utf8\n#Generated by Polyhedronisme\nNavigationInfo {\n	type [ "EXAMINE", "ANY" ]\n}\nTransform {\n  scale 1 1 1\n  translation 0 0 0\n  children\n  [\n    Shape\n    {\n      geometry IndexedFaceSet\n      {\n        creaseAngle .5\n        solid FALSE\n        coord Coordinate\n        {\n          point\n          [';bO=this.xyz;for(bN=0,bQ=bO.length;bN<bQ;bN++){bR=bO[bN];bS+=""+(bR[0]*bJ)+" "+(bR[1]*bJ)+" "+(bR[2]*bJ)+","}bS=bS.slice(0,-1);bS+="    ]\n}\ncolor Color\n{\n  color\n  [";bK=this.face_colors;for(bM=0,bG=bK.length;bM<bG;bM++){bU=bK[bM];bS+=""+bU[0]+" "+bU[1]+" "+bU[2]+" ,"}bS=bS.slice(0,-1);bS+="  ]\n}\ncolorPerVertex FALSE\ncoordIndex\n[";bH=this.face;for(bL=0,bF=bH.length;bL<bF;bL++){bP=bH[bL];for(bI=0,bT=bP.length;bI<bT;bI++){bR=bP[bI];bS+=""+bR+", "}bS+="-1,"}bS=bS.slice(0,-1);bS+="          ]\n      }\n      appearance Appearance\n      {\n        material Material\n        {\n	       ambientIntensity 0.2\n	       diffuseColor 0.9 0.9 0.9\n	       specularColor .1 .1 .1\n	       shininess .5\n        }\n      }\n    }\n  ]\n}";return bS};return bE})();f=function(){var bE;bE=new aW();bE.name="T";bE.face=[[0,1,2],[0,2,3],[0,3,1],[1,3,2]];bE.xyz=[[1,1,1],[1,-1,-1],[-1,1,-1],[-1,-1,1]];return bE};aw=function(){var bE;bE=new aW();bE.name="O";bE.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]];bE.xyz=[[0,0,1.414],[1.414,0,0],[0,1.414,0],[-1.414,0,0],[0,-1.414,0],[0,0,-1.414]];return bE};ap=function(){var bE;bE=new aW();bE.name="C";bE.face=[[3,0,1,2],[3,4,5,0],[0,5,6,1],[1,6,7,2],[2,7,4,3],[5,4,7,6]];bE.xyz=[[0.707,0.707,0.707],[-0.707,0.707,0.707],[-0.707,-0.707,0.707],[0.707,-0.707,0.707],[0.707,-0.707,-0.707],[0.707,0.707,-0.707],[-0.707,0.707,-0.707],[-0.707,-0.707,-0.707]];return bE};bi=function(){var bE;bE=new aW();bE.name="I";bE.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]];bE.xyz=[[0,0,1.176],[1.051,0,0.526],[0.324,1,0.525],[-0.851,0.618,0.526],[-0.851,-0.618,0.526],[0.325,-1,0.526],[0.851,0.618,-0.526],[0.851,-0.618,-0.526],[-0.325,1,-0.526],[-1.051,0,-0.526],[-0.325,-1,-0.526],[0,0,-1.176]];return bE};ax=function(){var bE;bE=new aW();bE.name="D";bE.face=[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]];bE.xyz=[[0,0,1.07047],[0.713644,0,0.797878],[-0.356822,0.618,0.797878],[-0.356822,-0.618,0.797878],[0.797878,0.618034,0.356822],[0.797878,-0.618,0.356822],[-0.934172,0.381966,0.356822],[0.136294,1,0.356822],[0.136294,-1,0.356822],[-0.934172,-0.381966,0.356822],[0.934172,0.381966,-0.356822],[0.934172,-0.381966,-0.356822],[-0.797878,0.618,-0.356822],[-0.136294,1,-0.356822],[-0.136294,-1,-0.356822],[-0.797878,-0.618034,-0.356822],[0.356822,0.618,-0.797878],[0.356822,-0.618,-0.797878],[-0.713644,0,-0.797878],[0,0,-1.07047]];return bE};X=function(bI){var bR,bQ,bE,bG,bO,bN,bP,bL,bJ,bH,bF,bM,bK;bG=2*aO/bI;bR=Math.sin(bG/2);bE=new aW();bE.name="P"+bI;for(bQ=0,bP=bI-1;0<=bP?bQ<=bP:bQ>=bP;0<=bP?bQ++:bQ--){bE.xyz.push([-M(bQ*bG),-a8(bQ*bG),-bR])}for(bQ=0,bL=bI-1;0<=bL?bQ<=bL:bQ>=bL;0<=bL?bQ++:bQ--){bE.xyz.push([-M(bQ*bG),-a8(bQ*bG),bR])}bE.face.push((function(){bM=[];for(var bS=bJ=bI-1;bJ<=0?bS<=0:bS>=0;bJ<=0?bS++:bS--){bM.push(bS)}return bM}).apply(this));bE.face.push((function(){bK=[];for(var bS=bI,bT=2*bI-1;bI<=bT?bS<=bT:bS>=bT;bI<=bT?bS++:bS--){bK.push(bS)}return bK}).apply(this));for(bQ=0,bF=bI-1;0<=bF?bQ<=bF:bQ>=bF;0<=bF?bQ++:bQ--){bE.face.push([bQ,(bQ+1)%bI,(bQ+1)%bI+bI,bQ+bI])}bE.xyz=B(bE,1);return bE};a5=function(bJ){var bT,bS,bR,bF,bE,bH,bP,bO,bQ,bM,bK,bI,bG,bN,bL;bH=2*aO/bJ;bS=Z(1-4/(4+2*M(bH/2)-2*M(bH)));bE=Z(1-bS*bS);bT=Z(bS*bS+bk(bE*M(bH/2),2));bE=-bE/bT;bS=-bS/bT;bF=new aW();bF.name="A"+bJ;for(bR=0,bQ=bJ-1;0<=bQ?bR<=bQ:bR>=bQ;0<=bQ?bR++:bR--){bF.xyz.push([bE*M(bR*bH),bE*a8(bR*bH),bS])}for(bR=0,bM=bJ-1;0<=bM?bR<=bM:bR>=bM;0<=bM?bR++:bR--){bF.xyz.push([bE*M((bR+0.5)*bH),bE*a8((bR+0.5)*bH),-bS])}bF.face.push((function(){bN=[];for(var bU=bK=bJ-1;bK<=0?bU<=0:bU>=0;bK<=0?bU++:bU--){bN.push(bU)}return bN}).apply(this));bF.face.push((function(){bL=[];for(var bU=bJ,bV=2*bJ-1;bJ<=bV?bU<=bV:bU>=bV;bJ<=bV?bU++:bU--){bL.push(bU)}return bL}).apply(this));for(bR=0,bG=bJ-1;0<=bG?bR<=bG:bR>=bG;0<=bG?bR++:bR--){bF.face.push([bR,(bR+1)%bJ,bR+bJ]);bF.face.push([bR,bR+bJ,(bJ+bR-1)%bJ+bJ])}bF.xyz=B(bF,1);return bF};bC=function(bG){var bN,bM,bE,bF,bK,bL,bI,bH,bJ;bF=2*aO/bG;bN=1;bE=new aW();bE.name="Y"+bG;for(bM=0,bL=bG-1;0<=bL?bM<=bL:bM>=bL;0<=bL?bM++:bM--){bE.xyz.push([-M(bM*bF),-a8(bM*bF),-0.2])}bE.xyz.push([0,0,bN]);bE.face.push((function(){bJ=[];for(var bO=bI=bG-1;bI<=0?bO<=0:bO>=0;bI<=0?bO++:bO--){bJ.push(bO)}return bJ}).apply(this));for(bM=0,bH=bG-1;0<=bH?bM<=bH:bM>=bH;0<=bH?bM++:bM--){bE.face.push([bM,(bM+1)%bG,bG])}bE.xyz=g(bE,3);return bE};an=(function(){function bE(){this.flags=new Object();this.verts=new Object();this.xyzs=new Object()}bE.prototype.newV=function(bG,bF){if(this.verts[bG]===void 0){this.verts[bG]=0;return this.xyzs[bG]=bF}};bE.prototype.newFlag=function(bF,bH,bG){if(this.flags[bF]===void 0){this.flags[bF]={}}return this.flags[bF][bH]=bG};bE.prototype.topoly=function(){var bG,bL,bO,bK,bI,bF,bM,bN,bJ,bH;bF=new aW();bG=0;bJ=this.verts;for(bK in bJ){bM=bJ[bK];bF.xyz[bG]=this.xyzs[bK];this.verts[bK]=bG;bG++}bG=0;bH=this.flags;for(bK in bH){bL=bH[bK];bF.face[bG]=[];for(bI in bL){bM=bL[bI];bN=bM;break}bM=bN;bF.face[bG].push(this.verts[bM]);bM=this.flags[bK][bM];bO=0;while(bM!==bN){bF.face[bG].push(this.verts[bM]);bM=this.flags[bK][bM];bO++;if(bO>1000){console.log("Bad flag spec, have a neverending face:",bK,this.flags[bK]);break}}bG++}bF.name="unknown polyhedron";return bF};return bE})();ah=function(bO,bU){var bN,bY,bX,bV,b1,bM,bW,bQ,bS,bT,bR,bL,bI,bJ,bG,bE,b0,b2,bZ,bP,bK,bH,bF;console.log("Taking kis of "+(bU===0?"":bU)+"-sided faces of "+bO.name+"...");bV=new an();bP=Q(bO.xyz);for(bJ=0,b0=bP.length;bJ<b0;bJ++){bK=bP[bJ],bW=bK[0],bT=bK[1];bV.newV("v"+bW,bT)}bS=bO.normals();bY=bO.centers();bM=false;bH=Q(bO.face);for(bG=0,b2=bH.length;bG<b2;bG++){bF=bH[bG],bW=bF[0],bX=bF[1];bL="v"+bX[bX.length-1];for(bE=0,bZ=bX.length;bE<bZ;bE++){bR=bX[bE];bI="v"+bR;if(bX.length===bU||bU===0){bM=true;bN="apex"+bW;b1=""+bW+bL;bV.newV(bN,C(bY[bW],e(0.2,bS[bW])));bV.newFlag(b1,bL,bI);bV.newFlag(b1,bI,bN);bV.newFlag(b1,bN,bL)}else{bV.newFlag(""+bW,bL,bI)}bL=bI}}if(!bM){console.log("No "+bU+"-fold components were found.")}bQ=bV.topoly();bQ.name="k"+(bU===0?"":bU)+bO.name;return bQ};aM=function(bF){var bP,bQ,bO,bG,bK,bU,bT,bR,bM,bL,bS,bE,bN,bJ,bI,bH;console.log("Taking ambo of "+bF.name+"...");bG=function(bW,bV){if(bW<bV){return bW+"_"+bV}else{return bV+"_"+bW}};bQ=new an();bN=Q(bF.face);for(bM=0,bS=bN.length;bM<bS;bM++){bJ=bN[bM],bO=bJ[0],bP=bJ[1];bI=bP.slice(-2),bU=bI[0],bT=bI[1];for(bL=0,bE=bP.length;bL<bE;bL++){bR=bP[bL];if(bU<bT){bQ.newV(bG(bU,bT),a3(bF.xyz[bU],bF.xyz[bT]))}bQ.newFlag("orig"+bO,bG(bU,bT),bG(bT,bR));bQ.newFlag("dual"+bT,bG(bT,bR),bG(bU,bT));bH=[bT,bR],bU=bH[0],bT=bH[1]}}bK=bQ.topoly();bK.name="a"+bF.name;return bK};bc=function(bS){var b0,bZ,bX,b4,bY,bW,bU,bV,bR,bO,bL,bP,bM,bJ,bH,b3,b5,b2,b1,bT,bG,bQ,bN,bK,bI,bF,bE,b7,b6;console.log("Taking gyro of "+bS.name+"...");bX=new an();bT=Q(bS.xyz);for(bP=0,b3=bT.length;bP<b3;bP++){bQ=bT[bP],bY=bQ[0],bV=bQ[1];bX.newV("v"+bY,bv(bV))}b0=bS.centers();bN=Q(bS.face);for(bM=0,b5=bN.length;bM<b5;bM++){bK=bN[bM],bY=bK[0],bZ=bK[1];bX.newV("center"+bY,bv(b0[bY]))}bI=Q(bS.face);for(bJ=0,b2=bI.length;bJ<b2;bJ++){bF=bI[bJ],bY=bF[0],bZ=bF[1];bE=bZ.slice(-2),bR=bE[0],bO=bE[1];b7=Q(bZ);for(bH=0,b1=b7.length;bH<b1;bH++){b6=b7[bH],bW=b6[0],bV=b6[1];bL=bV;bX.newV(bR+"~"+bO,az(bS.xyz[bR],bS.xyz[bO]));b4=bY+"f"+bR;bX.newFlag(b4,"center"+bY,bR+"~"+bO);bX.newFlag(b4,bR+"~"+bO,bO+"~"+bR);bX.newFlag(b4,bO+"~"+bR,"v"+bO);bX.newFlag(b4,"v"+bO,bO+"~"+bL);bX.newFlag(b4,bO+"~"+bL,"center"+bY);bG=[bO,bL],bR=bG[0],bO=bG[1]}}bU=bX.topoly();bU.name="g"+bS.name;return bU};u=function(bP){var bV,bT,bX,bU,bR,bS,bO,bL,bI,bM,bJ,bG,bW,bZ,bY,bQ,bN,bK,bH,bF,bE;console.log("Taking propellor of "+bP.name+"...");bT=new an();bQ=Q(bP.xyz);for(bM=0,bW=bQ.length;bM<bW;bM++){bN=bQ[bM],bU=bN[0],bS=bN[1];bT.newV("v"+bU,bv(bS))}bK=Q(bP.face);for(bJ=0,bZ=bK.length;bJ<bZ;bJ++){bH=bK[bJ],bU=bH[0],bV=bH[1];bF=bV.slice(-2),bO=bF[0],bL=bF[1];for(bG=0,bY=bV.length;bG<bY;bG++){bS=bV[bG];bI=""+bS;bT.newV(bO+"~"+bL,az(bP.xyz[bO],bP.xyz[bL]));bX=""+bU+"f"+bL;bT.newFlag("v"+bU,bO+"~"+bL,bL+"~"+bI);bT.newFlag(bX,bO+"~"+bL,bL+"~"+bO);bT.newFlag(bX,bL+"~"+bO,"v"+bL);bT.newFlag(bX,"v"+bL,bL+"~"+bI);bT.newFlag(bX,bL+"~"+bI,bO+"~"+bL);bE=[bL,bI],bO=bE[0],bL=bE[1]}}bR=bT.topoly();bR.name="p"+bP.name;return bR};v=function(bG){var bE,bF,bH;console.log("Taking reflection of "+bG.name+"...");for(bE=0,bF=bG.xyz.length-1;0<=bF?bE<=bF:bE>=bF;0<=bF?bE++:bE--){bG.xyz[bE]=e(-1,bG.xyz[bE])}for(bE=0,bH=bG.face.length-1;0<=bH?bE<=bH:bE>=bH;0<=bH?bE++:bE--){bG.face[bE]=bG.face[bE].reverse()}bG.name="r"+bG.name;return bG};aN=function(bR){var bZ,b5,bY,bS,bW,bX,bV,bU,bQ,bN,bO,bL,bJ,bH,b3,b4,b2,b1,b0,bF,bT,bP,bM,bK,bI,bG,bE;console.log("Taking dual of "+bR.name+"...");bW=new an();bS=[];for(bX=0,bT=bR.xyz.length-1;0<=bT?bX<=bT:bX>=bT;0<=bT?bX++:bX--){bS[bX]={}}bP=Q(bR.face);for(bO=0,b3=bP.length;bO<b3;bO++){bM=bP[bO],bX=bM[0],bY=bM[1];bQ=bY[bY.length-1];for(bL=0,b4=bY.length;bL<b4;bL++){bN=bY[bL];bS[bQ]["v"+bN]=""+bX;bQ=bN}}bZ=bR.centers();for(bX=0,bK=bR.face.length-1;0<=bK?bX<=bK:bX>=bK;0<=bK?bX++:bX--){bW.newV(""+bX,bZ[bX])}bI=Q(bR.face);for(bJ=0,b2=bI.length;bJ<b2;bJ++){bG=bI[bJ],bX=bG[0],bY=bG[1];bQ=bY[bY.length-1];for(bH=0,b1=bY.length;bH<b1;bH++){bN=bY[bH];bW.newFlag(bQ,bS[bN]["v"+bQ],""+bX);bQ=bN}}console.log("dual flag:",bW);b5=bW.topoly();bU=[];bE=b5.face;for(bF=0,b0=bE.length;bF<b0;bF++){bY=bE[bF];bV=J(bR.face[bY[0]],bR.face[bY[1]],bR.face[bY[2]]);bU[bV]=bY}b5.face=bU;if(bR.name[0]!=="d"){b5.name="d"+bR.name}else{b5.name=bR.name.slice(1)}return b5};H=function(bR,bX){var b1,b0,bY,b6,bQ,bZ,bT,bV,bW,bU,bP,bM,bN,bK,bI,bG,b5,b7,b4,b3,b2,bE,bS,bO,bL,bJ,bH,bF;console.log("Taking inset of "+(bX===0?"":bX)+"-sided faces of "+bR.name+"...");bY=new an();bS=Q(bR.xyz);for(bN=0,b5=bS.length;bN<b5;bN++){bO=bS[bN],bZ=bO[0],bW=bO[1];bY.newV("v"+bZ,bW)}bV=bR.normals();b1=bR.centers();bL=Q(bR.face);for(bK=0,b7=bL.length;bK<b7;bK++){bJ=bL[bK],bZ=bJ[0],b0=bJ[1];if(b0.length===bX||bX===0){for(bI=0,b4=b0.length;bI<b4;bI++){bU=b0[bI];bY.newV("f"+bZ+"v"+bU,C(a3(bR.xyz[bU],b1[bZ]),e(-0.2,bV[bZ])))}}}bQ=false;bH=Q(bR.face);for(bG=0,b3=bH.length;bG<b3;bG++){bF=bH[bG],bZ=bF[0],b0=bF[1];bP="v"+b0[b0.length-1];for(bE=0,b2=b0.length;bE<b2;bE++){bU=b0[bE];bM="v"+bU;if(b0.length===bX||bX===0){bQ=true;b6=bZ+bP;bY.newFlag(b6,bP,bM);bY.newFlag(b6,bM,"f"+bZ+bM);bY.newFlag(b6,"f"+bZ+bM,"f"+bZ+bP);bY.newFlag(b6,"f"+bZ+bP,bP);bY.newFlag("ex"+bZ,"f"+bZ+bP,"f"+bZ+bM)}else{bY.newFlag(bZ,bP,bM)}bP=bM}}if(!bQ){console.log("No "+bX+"-fold components were found.")}bT=bY.topoly();bT.name="n"+(bX===0?"":bX)+bR.name;return bT};ag=function(bR,bX){var b1,b0,bY,bQ,bZ,bT,bV,bW,bU,bP,bM,bN,bK,bI,bG,b5,b6,b4,b3,b2,bE,bS,bO,bL,bJ,bH,bF;console.log("Taking extrusion of "+(bX===0?"":bX)+"-sided faces of "+bR.name+"...");bY=new an();bS=Q(bR.xyz);for(bN=0,b5=bS.length;bN<b5;bN++){bO=bS[bN],bZ=bO[0],bW=bO[1];bY.newV("v"+bZ,bW)}bV=bR.normals();b1=bR.centers();bL=Q(bR.face);for(bK=0,b6=bL.length;bK<b6;bK++){bJ=bL[bK],bZ=bJ[0],b0=bJ[1];if(b0.length===bX||bX===0){for(bI=0,b4=b0.length;bI<b4;bI++){bU=b0[bI];bY.newV("f"+bZ+"v"+bU,C(bR.xyz[bU],e(0.3,bV[bZ])))}}}bQ=false;bH=Q(bR.face);for(bG=0,b3=bH.length;bG<b3;bG++){bF=bH[bG],bZ=bF[0],b0=bF[1];bP="v"+b0[b0.length-1];for(bE=0,b2=b0.length;bE<b2;bE++){bU=b0[bE];bM="v"+bU;if(b0.length===bX||bX===0){bQ=true;bY.newFlag(bZ+bP,bP,bM);bY.newFlag(bZ+bP,bM,"f"+bZ+bM);bY.newFlag(bZ+bP,"f"+bZ+bM,"f"+bZ+bP);bY.newFlag(bZ+bP,"f"+bZ+bP,bP);bY.newFlag("ex"+bZ,"f"+bZ+bP,"f"+bZ+bM)}else{bY.newFlag(bZ,bP,bM)}bP=bM}}if(!bQ){console.log("No "+bX+"-fold components were found.")}bT=bY.topoly();bT.name="x"+(bX===0?"":bX)+bR.name;console.log(bT);return bT};a7=function(bR){var b2,b1,bZ,b0,bW,bY,bX,bO,b3,bM,bQ,bP,bJ,bU,bT,bS,bL,bI,bG,b5,b6,b4,bV,bN,bK,bH,bF,bE;console.log("Taking stella of "+bR.name+"...");b2=bR.centers();bZ=new an();bV=Q(bR.xyz);for(bL=0,b5=bV.length;bL<b5;bL++){bN=bV[bL],b0=bN[0],bY=bN[1];bZ.newV("v"+b0,bY)}bK=Q(bR.face);for(bI=0,b6=bK.length;bI<b6;bI++){bH=bK[bI],b0=bH[0],b1=bH[1];bO="v"+b1[b1.length-2];bM="v"+b1[b1.length-1];bU=bR.xyz[b1[b1.length-2]];bT=bR.xyz[b1[b1.length-1]];for(bG=0,b4=b1.length;bG<b4;bG++){bX=b1[bG];bJ="v"+bX;bS=bR.xyz[bX];b3=bO+"~"+bM;bQ=bM+"~"+bO;bP=bM+"~"+bJ;bZ.newV(b3,a3(a3(bU,bT),b2[b0]));bZ.newFlag("in"+b0,b3,bP);bZ.newFlag("f"+b0+bM,bP,b3);bZ.newFlag("f"+b0+bM,b3,bM);bZ.newFlag("f"+b0+bM,bM,bP);bZ.newFlag("f"+b3,bO,bQ);bZ.newFlag("f"+b3,bQ,b3);bZ.newFlag("f"+b3,b3,bO);bF=[bM,bJ],bO=bF[0],bM=bF[1];bE=[bT,bS],bU=bE[0],bT=bE[1]}}bW=bZ.topoly();bW.name="*"+bR.name;return bW};ae=function(bH,bG){var bL,bJ,bI,bE,bM,bF,bK;bL=0.1;bE=be(bH);for(bF=0,bK=bG.length;bF<bK;bF++){bI=bG[bF];bM=k(bE[bI[0]],bE[bI[1]]);bJ=e(bL*1/2*(1-Z(G(bM,bM))),bM);bE[bI[0]]=C(bE[bI[0]],bJ);bE[bI[1]]=C(bE[bI[1]],bJ)}return bE};bl=function(bI,bH){var bL,bJ,bE,bF,bM,bG,bK;bE=(function(){var bQ,bO,bP,bN;bN=[];for(bQ=0,bO=bH.length;bQ<bO;bQ++){bP=bH[bQ],bL=bP[0],bJ=bP[1];bN.push(k(bI[bL],bI[bJ]))}return bN})();bF=[0,0,0];for(bG=0,bK=bE.length;bG<bK;bG++){bM=bE[bG];bF=C(bF,bM)}bF=e(1/bH.length,bF);return _.map(bI,function(bN){return bq(bN,bF)})};E=function(bI,bH){var bE,bG,bF;bG=[0,0,0];bE=_.max(_.map(bI,function(bJ){return O(bJ)}));bF=1/bE;bH||(bH=bF);return _.map(bI,function(bJ){return[bH*bJ[0],bH*bJ[1],bH*bJ[2]]})};bp=function(bK,bH){var bP,bM,bO,bL,bG,bE,bQ,bJ,bI,bN,bF;bP=0.1;bE=be(bK);for(bJ=0,bN=bH.length;bJ<bN;bJ++){bL=bH[bJ];bO=(function(){var bT,bR,bS;bS=[];for(bT=0,bR=bL.length;bT<bR;bT++){bQ=bL[bT];bS.push(bK[bQ])}return bS})();bG=aq(bO);bM=bu(bO);if(G(bG,bM)<0){bG=e(-1,bG)}for(bI=0,bF=bL.length;bI<bF;bI++){bQ=bL[bI];bE[bQ]=C(bE[bQ],e(G(e(bP,bG),bq(bM,bK[bQ])),bG))}}return bE};o=function(bK,bJ){var bF,bE,bH,bI,bG,bL;console.log("Canonicalizing "+bK.name+"...");bE=bK.face;bF=bK.getEdges();bG=bK.xyz;bI=1;for(bH=0;0<=bJ?bH<=bJ:bH>=bJ;0<=bJ?bH++:bH--){bL=be(bG);bG=ae(bG,bF);bG=bl(bG,bF);bG=bp(bG,bE);bI=_.max(_.map(_.zip(bG,bL),function(bN){var bM,bO;bM=bN[0],bO=bN[1];return O(bq(bM,bO))}));if(bI<1e-8){break}}console.log("[canonicalization done, last |deltaV|="+bI+"]");return bG};T=function(bH){var bI,bF,bG,bE;bF=bH.centers();for(bG=0,bE=bF.length;bG<bE;bG++){bI=bF[bG];bI=e(1/G(bI,bI),bI)}return bF};K=function(bG){var bU,bO,bH,bP,bE,bN,bT,bS,bQ,bL,bK,bR,bF,bM,bJ,bI;bU=[];bM=bG.face;for(bL=0,bR=bM.length;bL<bR;bL++){bP=bM[bL];bH=[0,0,0];bE=[0,0,0];bO=0;bJ=bP.slice(-2),bT=bJ[0],bS=bJ[1];for(bK=0,bF=bP.length;bK<bF;bK++){bQ=bP[bK];bH=C(bH,bG.xyz[bQ]);bE=C(bE,a4(bG.xyz[bT],bG.xyz[bS],bG.xyz[bQ]));bO+=aA(bG.xyz[bT],bG.xyz[bS]);bI=[bS,bQ],bT=bI[0],bS=bI[1]}bH=e(1/bP.length,bH);bE=bv(bE);bO=bO/bP.length;bN=aG(e(G(bH,bE),bE));bU.push(e((1+bO)/2,bN))}return bU};g=function(bI,bF){var bG,bE,bH;bE=aN(bI);console.log("Pseudo-canonicalizing "+bI.name+"...");for(bG=0,bH=bF-1;0<=bH?bG<=bH:bG>=bH;0<=bH?bG++:bG--){bE.xyz=K(bI);bI.xyz=K(bE)}return bI.xyz};B=function(bI,bF){var bG,bE,bH;bE=aN(bI);console.log("Planarizing "+bI.name+"...");for(bG=0,bH=bF-1;0<=bH?bG<=bH:bG>=bH;0<=bH?bG++:bG--){bE.xyz=T(bI);bI.xyz=T(bE)}return bI.xyz};N=function(b6){var b5,b1,bW,bZ,b4,bO,b7,bY,bU,bQ,b3,bK,b0,bV,bM,bN,bP,bX,b2,bL,bJ,bI,bF,bE,bT,bR,bH,bS,bG;bP=999;b0=[];bV=[];bM=b6.length;b3=function(b8,b9){return(b8||b9)&&!(b8&&b9)};b5=function(ca,b9,b8){return(b9[0]-ca[0])*(b8[1]-ca[1])-(b8[0]-ca[0])*(b9[1]-ca[1])};bU=function(ca,b9,b8){return b5(ca,b9,b8)>0};bQ=function(ca,b9,b8){return b5(ca,b9,b8)>=0};bW=function(ca,b9,b8){return b5(ca,b9,b8)===0};b1=function(ca,b9,b8){if(bW(ca,b9,b8)){return false}if(ca[0]!==b9[0]){return(ca[0]<=b8[0])&&(b8[0]<=b9[0])||(ca[0]>=b8[0])&&(b8[0]>=b9[0])}else{return(ca[1]<=b8[1])&&(b8[1]<=b9[1])||(ca[1]>=b8[1])&&(b8[1]>=b9[1])}};bY=function(cb,ca,b9,b8){if(bW(cb,ca,b9)||bW(cb,ca,b8)||bW(b9,b8,cb)||bW(b9,b8,ca)){return false}return b3(bU(cb,ca,b9),bU(cb,ca,b8))&&b3(bU(b9,b8,cb),bU(b9,b8,ca))};b7=function(cb,ca,b9,b8){if(bY(cb,ca,b9,b8)){return true}else{if(b1(cb,ca,b9)||b1(cb,ca,b8)||b1(b9,b8,cb)||b1(b9,b8,ca)){return true}else{return false}}};bO=function(ca,b8){var cb,b9;b9=(ca+1+bM)%bM;cb=(ca-1+bM)%bM;if(bQ(b6[ca],b6[b9],b6[cb])){return bU(b6[ca],b6[b8],b6[cb])&&bU(b6[b8],b6[ca],b6[b9])}return !(bQ(b6[ca],b6[b8],b6[b9])&&bQ(b6[b8],b6[ca],b6[cb]))};b4=function(b9,b8){var cb,ca;cb=0;while(true){ca=(cb+1+bM)%bM;if((cb!==b9)&&(ca!==b9)&&(cb!==b8)&&(ca!==b8)&&bY(b6[b9],b6[b8],b6[cb],b6[ca])){return false}cb=(cb+1+bM)%bM;if(cb===0){break}}return true};bZ=function(b9,b8){return bO(b9,b8)&&bO(b8,b9)&&b4(b9,b8)};bJ=0;while(true){bI=(bJ+1+bM)%bM;bL=(bJ-1+bM)%bM;bV[bJ]=bZ(bL,bI);bJ=(bJ+1+bM)%bM;if(bJ===0){break}}b2=(function(){bG=[];for(var b9=0,b8=bM-1;0<=b8?b9<=b8:b9>=b8;0<=b8?b9++:b9--){bG.push(b9)}return bG}).apply(this);bX=bM;bR=bP;bN=0;while(bR>0&&bX>3){bR-=1;bI=bN;bT=bP;while(true){bT-=1;bK=false;if(bV[bI]){bF=(bI+1+bM)%bM;bE=(bF+1+bM)%bM;bJ=(bI-1+bM)%bM;bL=(bJ-1+bM)%bM;b0.push([b2[bJ],b2[bF]]);bV[bJ]=bZ(bL,bF);bV[bF]=bZ(bJ,bE);b6=b6.slice(0,bI+1||9000000000).concat(b6.slice(bF));b2=b2.slice(0,bI+1||9000000000).concat(b2.slice(bF));if(bL>bI){bL-=1}if(bJ>bI){bJ-=1}if(bF>bI){bF-=1}if(bE>bI){bE-=1}bM--;bN=bF;bX--;bK=true}bI=(bI+1+bM)%bM;if(!(bT>0&&!bK&&bI!==bN)){break}}}return b0};b=function(bF,bE){if(((bF[0]===bE[0])&&(bF[1]===bE[1])&&(bF[2]===bE[2]))||(bF[0]===bE[1])&&(bF[1]===bE[2])&&(bF[2]===bE[0])||(bF[0]===bE[2])&&(bF[1]===bE[0])&&(bF[2]===bE[1])){return true}else{return false}};w=function(cb,bY){var bV,cc,bX,bW,bT,bZ,b9,bF,bP,cd,cg,cf,ce,ca,b8,b7,b6,bU,bM,bL,bK,bJ,bI,bH,bG,bE,b5,b4,b3,b2,b1,b0,bS,bR,bQ,bO,bN;bT=[];bF=[];b0=(function(){var ci,ch;ch=[];for(b9=0,ci=cb.length-1;0<=ci?b9<=ci:b9>=ci;0<=ci?b9++:b9--){ch.push([b9,(b9+1)%cb.length])}return ch})();for(ca=0,bU=b0.length;ca<bU;ca++){bS=b0[ca],cf=bS[0],ce=bS[1];bT[cf]=[ce];bF[ce]=[cf]}for(b8=0,bM=bY.length;b8<bM;b8++){cc=bY[b8];bT[cc[0]].push(cc[1]);bT[cc[1]].push(cc[0]);bF[cc[0]].push(cc[1]);bF[cc[1]].push(cc[0])}cd=[];for(b7=0,bL=bY.length;b7<bL;b7++){cc=bY[b7];bR=bT[cc[1]];for(b6=0,bK=bR.length;b6<bK;b6++){bX=bR[b6];bQ=bF[cc[0]];for(b5=0,bJ=bQ.length;b5<bJ;b5++){bW=bQ[b5];if(bX===bW){cd.push([cc[0],cc[1],bX])}}}bO=bT[cc[0]];for(b4=0,bI=bO.length;b4<bI;b4++){bX=bO[b4];bN=bF[cc[1]];for(b3=0,bH=bN.length;b3<bH;b3++){bW=bN[b3];if(bX===bW){cd.push([cc[1],cc[0],bX])}}}}cg=[cd.pop()];for(b2=0,bG=cd.length;b2<bG;b2++){bP=cd[b2];bV=false;for(b1=0,bE=cg.length;b1<bE;b1++){bZ=cg[b1];if(b(bP,bZ)){bV=true;break}}if(!bV){cg.push(bP)}}return cg};af=function(bJ,bL){var bT,bO,bU,bS,bR,bM,bQ,bP,bN,bH,bF,bV,bW,bK,bI,bG,bE;bL=bL||false;console.log("Triangulating faces of "+bJ.name+"...");bM=new aW();bM.xyz=P(bJ.xyz);bM.face_colors=[];bK=Q(bJ.face);for(bH=0,bV=bK.length;bH<bV;bH++){bI=bK[bH],bS=bI[0],bU=bI[1];if(bU.length>3){bT=ad((function(){var bZ,bX,bY;bY=[];for(bZ=0,bX=bU.length;bZ<bX;bZ++){bN=bU[bZ];bY.push(bJ.xyz[bN])}return bY})());bO=N(bT);bP=w(bU,bO);bG=Q(bP);for(bF=0,bW=bG.length;bF<bW;bF++){bE=bG[bF],bR=bE[0],bQ=bE[1];bM.face.push([bU[bQ[0]],bU[bQ[1]],bU[bQ[2]]]);if(bL){bM.face_colors.push(bJ.face_colors[bS])}}}else{bM.face.push([bU[0],bU[1],bU[2]]);if(bL){bM.face_colors.push(bJ.face_colors[bS])}}}bM.name=bJ.name;return bM};am=function(bE){var bJ,bK,bM,bH,bG,bL,bF,bI;bK="";bI=bE.face;for(bH=0,bL=bI.length;bH<bL;bH++){bJ=bI[bH];for(bG=0,bF=bJ.length;bG<bF;bG++){bM=bJ[bG];bK+=""+bM+"->"}bK+="\n"}return console.log(bK)};F=function(){var bL,bI,bH,bG,bK,bJ,bF,bE;bG=["T","O","C","I","D","P3","P4","A4","A5","Y3","Y4"];bI=["k","a","g","p","d","n","x","*"];console.log("===== Test Basic Ops =====");for(bK=0,bF=bI.length;bK<bF;bK++){bL=bI[bK];console.log("Operator "+bL);for(bJ=0,bE=bG.length;bJ<bE;bJ++){bH=bG[bJ];console.log(bL+bH+":",al(bL+bH))}}return console.log("===== Done Testing Basic Ops =====")};bB=function(bG,bF){var bE;bG||(bG=[0,0,0]);bF||(bF=bv(bG));bE=new CSG.Vertex(new CSG.Vector(bG[0],bG[1],bG[2]),new CSG.Vector(bF[0],bF[1],bF[2]));return bE};by=function(bL){var bG,bH,bK,bF,bJ,bE,bI;bG=[];bI=bL.face;for(bJ=0,bE=bI.length;bJ<bE;bJ++){bK=bI[bJ];bG.push(new CSG.Polygon((function(){var bO,bM,bN;bN=[];for(bO=0,bM=bK.length;bO<bM;bO++){bF=bK[bO];bN.push(bB(bL.xyz[bF]))}return bN})(),{}))}bH=CSG.fromPolygons(bG);return bH};q=function(bK,bG){var bH,bF,bJ,bE,bI,bL;bI=Q(bK);for(bJ=0,bE=bI.length;bJ<bE;bJ++){bL=bI[bJ],bH=bL[0],bF=bL[1];if(O(bq(bG,bF))<0.000001){return bH}}return -1};bo=function(bF){var bL,bM,bG,bK,bI,bH,bJ,bE;bG=[];bG.push(bF[0]);for(bI=0,bJ=bF.length;bI<bJ;bI++){bK=bF[bI];bL=false;for(bH=0,bE=bG.length;bH<bE;bH++){bM=bG[bH];if(O(bq(bK,bM))<0.000001){bL=true}}if(!bL){bG.push(bK)}}return bG};aL=function(bL,bK,bG){var bF,bE,bI,bH,bJ;bH=bq(bK,bL);bI=bq(bG,bL);bF=G(bv(bH),bI);bE=O(bq(bv(bH),bv(bI)));if(bE<0.000001&&(0<(bJ=O(bI))&&bJ<O(bH))){return true}else{return false}};ao=function(bK){var bQ,bP,bT,bG,bR,bS,bN,bJ,bO,bW,bL,bH,bF,bE,bV,bX,bU,bM,bI;bG=bK.face;bW=bK.xyz;bS=[];for(bH=0,bV=bG.length;bH<bV;bH++){bT=bG[bH];bR=[];bQ=bW[bT[bT.length-1]];for(bF=0,bX=bT.length;bF<bX;bF++){bO=bT[bF];bP=bW[bO];bM=Q(bW);for(bE=0,bU=bM.length;bE<bU;bE++){bI=bM[bE],bL=bI[0],bJ=bI[1];if(aL(bQ,bP,bJ)){bR.push(bL)}}bR.push(bO);bQ=bP}bS.push(bR)}bN=new aW();bN.face=bS;bN.xyz=P(bW);return bN};m=function(bI){var bF,bJ,bH,bS,bR,bO,bN,bM,bQ,bG,bE,bP,bL,bK;bJ=[];bR=[];bP=bI.toPolygons();for(bO=0,bQ=bP.length;bO<bQ;bO++){bF=bP[bO];bL=bF.vertices;for(bN=0,bG=bL.length;bN<bG;bN++){bS=bL[bN];bR.push([bS.pos.x,bS.pos.y,bS.pos.z])}}bR=bo(bR);bK=bI.toPolygons();for(bM=0,bE=bK.length;bM<bE;bM++){bF=bK[bM];bJ.push((function(){var bU,bW,bV,bT;bV=bF.vertices;bT=[];for(bU=0,bW=bV.length;bU<bW;bU++){bS=bV[bU];bT.push(q(bR,[bS.pos.x,bS.pos.y,bS.pos.z]))}return bT})())}bH=new aW();bH.face=bJ;bH.xyz=bR;return ao(bH)};aX=function(bG,bF){var bI,bH,bE;bI=by(bG);bH=by(bF);bE=bI.union(bH);return m(bE)};bh=function(bG,bF){var bI,bH,bE;bI=by(bG);bH=by(bF);bE=bI.intersect(bH);return m(bE)};aU=function(bG,bF){var bI,bH,bE;bI=by(bG);bH=by(bF);bE=bI.subtract(bH);return m(bE)};a=function(bF){var bI,bH,bJ,bG,bL,bM,bE,bK;bJ=[];bH={};for(bE=0,bK=bF.length;bE<bK;bE++){bI=bF[bE];bH[bI[0]]=bI[1]}bM=bF[0][0];bL=bF[0][1];bJ.push(bL);bG=0;while(bL!==bM){bL=bH[bL];bJ.push(bL);bG++;if(bG>1000){console.log("Bad edges to face join, have a neverending face:",bF);break}}return bJ};bg=function(bI){var bL,bM,bF,bK,bH,bG,bJ,bE;bF=[];bF.push(vertlist[0]);for(bH=0,bJ=vertlist.length;bH<bJ;bH++){bK=vertlist[bH];bL=false;for(bG=0,bE=bF.length;bG<bE;bG++){bM=bF[bG];if(O(bq(bK,bM))<0.000001){bL=true}}if(!bL){bF.push(bK)}}return bF};I=function(bH){var bI,bF,bG,bE;bI="";for(bG=0,bE=bH.length;bG<bE;bG++){bF=bH[bG];bI+=""+bF+"->"}return bI.slice(0,(bI.length-3)+1||9000000000)};x=function(bE){var bJ,bK,bL,bI,bO,bM,bG,bN,bH,bF;bJ=[];bJ=(_.reduce(_.map(bE,bj),(function(bQ,bP){return bQ.concat(bP)}),bJ)).slice(0);bO=[];while(bJ.length>0){bK=bJ.pop();bM=false;if(bJ.length>0){bH=Q(bJ);for(bG=0,bN=bH.length;bG<bN;bG++){bF=bH[bG],bI=bF[0],bL=bF[1];if(bK[0]===bL[1]&&bK[1]===bL[0]){bM=true;bJ.splice(bI,1)}}if(!bM){bO.push(bK)}}else{bO.push(bK)}}return a(bO)};aZ=function(bZ){var bU,bN,ci,b2,b0,bI,cf,bL,b9,cj,bE,ce,bX,bF,cc,bP,bY,bW,bV,b1,b5,b3,ch,cg,cd,cb,bT,bM,bK,bJ,bH,bG,ca,b8,b7,b4,bS,bR,bQ,bO,b6;bV=bZ.normals();b1=function(ck){return ac(100*ck[0])+"~"+ac(100*ck[1])+"~"+ac(100*ck[2])};cf=[];bP={};b0=(function(){b6=[];for(var cl=0,ck=bZ.face.length-1;0<=ck?cl<=ck:cl>=ck;0<=ck?cl++:cl--){b6.push(cl)}return b6}).apply(this);for(cg=0,bT=b0.length;cg<bT;cg++){cj=b0[cg];b9=b1(bV[cj]);if(bP[b9]){bP[b9].push(cj)}else{bP[b9]=[cj]}}for(cc in bP){b3=bP[cc];cf.push(P(b3))}bN=aN(bZ);b2={};bS=bN.getEdges();for(cd=0,bM=bS.length;cd<bM;cd++){ci=bS[cd];b2[ci[0]]=[]}bR=bN.getEdges();for(cb=0,bK=bR.length;cb<bK;cb++){ci=bR[cb];b2[ci[0]].push(ci[1]);b2[ci[1]].push(ci[0])}bE=function(cl,ck){if(b2[cl].indexOf(ck)!==-1){return true}else{return false}};bF=[];for(ca=0,bJ=cf.length;ca<bJ;ca++){bI=cf[ca];bU=[];while(bI.length>0){bU.push(0);for(ce=0,bQ=bI.length-1;0<=bQ?ce<=bQ:ce>=bQ;0<=bQ?ce++:ce--){if(bs.call(bU,ce)>=0){continue}for(b8=0,bH=bU.length;b8<bH;b8++){b5=bU[b8];if(bE(bI[ce],bI[b5])){bU.push(ce);ce=0;break}}}bX=[];bO=bU.sort((function(cl,ck){return cl-ck})).reverse();for(b7=0,bG=bO.length;b7<bG;b7++){b5=bO[b7];bX.push(bI.splice(b5,1)[0])}bF.push(bX);bU=[]}}bL=_.map(bF,(function(ck){return _.map(ck,function(cl){return bZ.face[cl]})}));bY=_.map(bL,x);bW=new aW();bW.xyz=P(bZ.xyz);bW.face=bY;return bW};ai={};bw=500;aE=400;U={};j=P(y);ar=P(y);Y=800;D=5;bx=0;R=0.8;p=bw/2;aB=aE/2;z=new Date();s=true;a1="rgba(255,255,255,1.0)";au="area";h="fillstroke";bn=0.5;av=false;ab=0;aa=0;aK=[1,0,0];bd=["C2dakD","oC20kkkT","kn4C40A0dA4","opD","lT","lK5oC","knD","dn6x4K5bT","oox4P7","n18n18n9n9n9soxY9"];aI=function(bG,bE){var bH,bF;bH=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;bF=new bH();bF.append(bG);return saveAs(bF.getBlob("text/plain;charset="+document.characterSet),bE)};L=[];bA=[];ay=["#ff3333","#33ff33","#3333ff","#ffff33","#ff33ff","#33ffff","#dddddd","#555555","#dd0000","#00dd00","#0000dd"];aY=["#ff8888","#dddddd","#777777","#aa3333","#ff0000","#ffffff","#aaaaaa"];l=["#ff8888","#ffeeee","#88ff88","#dd7777","#ff2222","#22ff22","#ee4422","#aaaaaa"];bD=function(bF){var bE;if(bF[0]==="#"){bF=bF.slice(1)}if(bF.length===3){bE=bF.split("").map(function(bG){return parseInt(bG+bG,16)/255})}else{bE=bF.match(/.{2}/g).map(function(bG){return parseInt(bG,16)/255})}return bE};a9=aY;ak=function(bE){if(bE<a9.length){return bD(a9[bE])}else{return bD(a9[a9.length-1])}};a6=function(bE,bH){var bF,bG;bG=ac(100*bE);if(bG in bH){return bH[bG]}else{bF=ak(_.toArray(bH).length);bH[bG]=bF;return bF}};V=function(bE){var bM,bI,bH,bK,bL,bF,bJ,bG;bE.face_colors=[];bI={};bG=bE.face;for(bF=0,bJ=bG.length;bF<bJ;bF++){bH=bG[bF];if(au==="area"){bK=(function(){var bP,bN,bO;bO=[];for(bP=0,bN=bH.length;bP<bN;bP++){bL=bH[bP];bO.push(bE.xyz[bL])}return bO})();bM=a6(bt(bK),bI)}else{bM=ak(bH.length-3)}bE.face_colors.push(bM)}return bE};aV=[[/e/g,"aa"],[/b/g,"ta"],[/o/g,"jj"],[/m/g,"kj"],[/t(\d*)/g,"dk$1d"],[/j/g,"dad"],[/s/g,"dgd"],[/dd/g,""],[/ad/g,"a"],[/gd/g,"g"],[/aO/g,"aC"],[/aI/g,"aD"],[/gO/g,"gC"],[/gI/g,"gD"]];ba=function(bH){var bE,bG,bK,bJ,bF,bI;bG=bH;for(bJ=0,bF=aV.length;bJ<bF;bJ++){bI=aV[bJ],bK=bI[0],bE=bI[1];bG=bG.replace(bK,bE)}console.log(""+bH+" executed as "+bG);return bG};al=function(bF){var bH,bE,bG;bG=new aW();bH=0;bE=ba(bF);if(bE.search(/([0-9]+)$/)!==-1){bH=1*RegExp.lastParen;bE=bE.slice(0,-RegExp.lastParen.length)}switch(bE.slice(-1)){case"T":bG=f();break;case"O":bG=aw();break;case"C":bG=ap();break;case"I":bG=bi();break;case"D":bG=ax();break;case"P":bG=X(bH);break;case"A":bG=a5(bH);break;case"Y":bG=bC(bH);break;default:return}while(bE!==""){bH=0;if(bE.search(/([0-9]+)$/)!==-1){bH=1*RegExp.lastParen;bE=bE.slice(0,-RegExp.lastParen.length)}switch(bE.slice(-1)){case"d":bG=aN(bG);break;case"k":bG=ah(bG,bH);break;case"a":bG=aM(bG);break;case"g":bG=bc(bG);break;case"p":bG=u(bG);break;case"r":bG=v(bG);break;case"K":bG.xyz=g(bG,bH===0?1:bH);break;case"C":bG.xyz=o(bG,bH===0?1:bH);break;case"A":bG.xyz=B(bG,bH===0?1:bH);break;case"n":bG=H(bG,bH);break;case"x":bG=ag(bG,bH);break;case"l":bG=a7(bG,bH);break;case"z":bG=af(bG,false)}bE=bE.slice(0,-1)}bG.xyz=bl(bG.xyz,bG.getEdges());bG.xyz=E(bG.xyz);bG=V(bG);return bG};bz=function(){var bE,bJ,bI,bH,bG,bF;bF={};bE=/\+/g;bG=/([^&=]+)=?([^&]*)/g;bJ=function(bK){return decodeURIComponent(bK.replace(bE," "))};bH=window.location.search.substring(1);while(bI=bG.exec(bH)){bF[bJ(bI[1])]=bJ(bI[2])}return bF};aP=function(){var bE;bE=$("#poly");bE.width(bw);bE.height(aE);ai=bE[0].getContext("2d");ai.lineWidth=bn;if(s){return ai.clearRect(0,0,bw,aE)}else{ai.clearRect(0,0,bw,aE);ai.fillStyle=a1;return ai.fillRect(0,0,bw,aE)}};aR=function(){if(s){return ai.clearRect(0,0,bw,aE)}else{ai.clearRect(0,0,bw,aE);ai.fillStyle=a1;return ai.fillRect(0,0,bw,aE)}};a0=function(bE){var bF,bN,bM,bO,bI,bG,bL,bJ,bK,bH;bF=bE.centers();bM=bE.normals();bI=[0,0,(D*R-bx)/(1-R)];bO=function(bQ,bP){return -G(bq(bI,bQ[0]),bQ[1])*G(bq(bP[0],bQ[0]),bQ[1])};bG=function(bQ,bP){return bQ[0][2]-bP[0][2]};bL=_.zip(bF,bM,(function(){bH=[];for(var bQ=0,bP=bE.face.length-1;0<=bP?bQ<=bP:bQ>=bP;0<=bP?bQ++:bQ--){bH.push(bQ)}return bH}).apply(this)).sort(bG).map(function(bP){return bP[2]});bE.face=(function(){var bR,bP,bQ;bQ=[];for(bR=0,bP=bL.length;bR<bP;bR++){bN=bL[bR];bQ.push(bE.face[bN])}return bQ})();return bE.face_colors=(function(){var bR,bP,bQ;bQ=[];for(bR=0,bP=bL.length;bR<bP;bR++){bN=bL[bR];bQ.push(bE.face_colors[bN])}return bQ})()};W=function(b0,cf){var b7,bE,bR,bV,bZ,bG,b6,bY,bF,b4,ci,bW,b1,bS,b3,b2,cc,cb,ca,b9,bX,bL,bJ,bI,bH,b8,b5,cj,ch,cg,ce,cd,bU,bT,bQ,bP,bO,bN,bM,bK;cf||(cf=[3,3,3]);bF=_.map(b0.xyz,function(ck){return ck});b0.xyz=_.map(b0.xyz,function(ck){return t(j,ck)});a0(b0);b5=Q(b0.face);for(cc=0,bX=b5.length;cc<bX;cc++){bU=b5[cc],bG=bU[0],bR=bU[1];ai.beginPath();ci=bR[bR.length-1];bT=A(C(cf,b0.xyz[ci]),D,bx,R,Y),b3=bT[0],b2=bT[1];ai.moveTo(b3+p,b2+aB);for(cb=0,bL=bR.length;cb<bL;cb++){b4=bR[cb];bQ=A(C(cf,b0.xyz[b4]),D,bx,R,Y),b3=bQ[0],b2=bQ[1];ai.lineTo(b3+p,b2+aB)}bE=b0.face_colors[bG];bZ=(function(){var cl,cm,ck;ck=[];for(cl=0,cm=bR.length;cl<cm;cl++){b4=bR[cl];ck.push(b0.xyz[b4])}return ck})();b6=G(aq(bZ),bv([1,-1,0]));bE=e((b6/2+0.5)*0.7+0.3,bE);if(h==="fill"||h==="fillstroke"){ai.fillStyle="rgba("+(ac(bE[0]*255))+", "+(ac(bE[1]*255))+", "+(ac(bE[2]*255))+", "+1+")";ai.fill();ai.strokeStyle="rgba("+(ac(bE[0]*255))+", "+(ac(bE[1]*255))+", "+(ac(bE[2]*255))+", "+1+")";ai.stroke()}if(h==="fillstroke"){ai.fillStyle="rgba("+(ac(bE[0]*255))+", "+(ac(bE[1]*255))+", "+(ac(bE[2]*255))+", "+1+")";ai.fill();ai.strokeStyle="rgba(0,0,0, .3)";ai.stroke()}if(h==="stroke"){ai.strokeStyle="rgba(0,0,0, .8)";ai.stroke()}}b7=_.map(L,function(ck){return t(j,ck)});bY=_.map(bA,function(ck){return t(j,ck)});bV=(function(){var cl,ck;ck=[];for(bG=0,cl=b7.length-1;0<=cl?bG<=cl:bG>=cl;0<=cl?bG++:bG--){ck.push(""+bG)}return ck})();b1=(function(){var cl,ck;ck=[];for(bS=0,cl=b0.xyz.length-1;0<=cl?bS<=cl:bS>=cl;0<=cl?bS++:bS--){ck.push(""+bS)}return ck})();bP=Q(b0.face);for(ca=0,bJ=bP.length;ca<bJ;ca++){bO=bP[ca],bG=bO[0],bR=bO[1];ai.textAlign="center";ai.fillStyle="rgba(0,0,0,1)";bN=A(C(cf,b7[bG]),D,bx,R,Y),b3=bN[0],b2=bN[1];ai.fillText(bV[bG],b3+p,b2+aB)}bM=Q(b0.face);for(b9=0,bI=bM.length;b9<bI;b9++){bK=bM[b9],bG=bK[0],bR=bK[1];ai.strokeStyle="rgba(0,0,0,1)";ai.beginPath();cj=A(C(cf,b7[bG]),D,bx,R,Y),b3=cj[0],b2=cj[1];ai.moveTo(b3+p,b2+aB);ch=A(C(cf,C(b7[bG],e(0.1,bY[bG]))),D,bx,R,Y),b3=ch[0],b2=ch[1];ai.lineTo(b3+p,b2+aB);ai.stroke()}cg=Q(b0.xyz);for(b8=0,bH=cg.length;b8<bH;b8++){ce=cg[b8],bS=ce[0],bW=ce[1];cd=A(C(cf,b0.xyz[bS]),D,bx,R,Y),b3=cd[0],b2=cd[1]}return b0.xyz=bF};aF=function(){var bG,bJ,bI,bF,bH,bK,bE;aR();bH=Q(U);bE=[];for(bI=0,bF=bH.length;bI<bF;bI++){bK=bH[bI],bG=bK[0],bJ=bK[1];bE.push(W(bJ,[0+3*bG,0,3]))}return bE};br=function(){var bF,bG,bJ,bI,bE,bH,bK;aR();bF=(2*Math.PI)/180*z.getSeconds()*0.1;bH=Q(U);for(bI=0,bE=bH.length;bI<bE;bI++){bK=bH[bI],bG=bK[0],bJ=bK[1];W(bJ,[0+3*bG,0,3])}return setTimeout(br,100)};$(function(){var bN,bM,bK,bH,bF,bP,bJ,bI,bO,bE,bL,bG;aP();bF=bz();if("recipe" in bF){bH=[bF.recipe];$("#spec").val(bH)}else{bH=[bm(bd)];$("#spec").val(bH)}bN=ap();bM=ap();bK=ap().rescale(0.5);bL=bN.xyz;for(bJ=0,bO=bL.length;bJ<bO;bJ++){bP=bL[bJ];bK.translate(e(1,bP));bM=aX(bM,bK);bK.translate(e(-1,bP))}bG=(aN(ap())).xyz;for(bI=0,bE=bG.length;bI<bE;bI++){bP=bG[bI];bK.translate(e(1,bP));bM=aU(bM,bK);bK.translate(e(-1,bP))}U=[V(bM)];L=_.map(U[0].centers(),function(bQ){return bQ});bA=_.map(U[0].normals(),function(bQ){return bQ});aF();$("#spec").change(function(bQ){bH=$("#spec").val().split(/\s+/g).slice(0,2);U=_.map(bH,function(bR){return al(bR)});return aF()});$("#poly").mousewheel(function(bS,bT,bR,bQ){bS.preventDefault();Y*=(10+bT)/10;return aF()});$("#poly").mousedown(function(bQ){var bR;bQ.preventDefault();av=true;ab=bQ.clientX-$(this).offset().left;aa=bQ.clientY-$(this).offset().top;bR=aQ(ab,aa,p,aB,D,bx,R,Y);if(bR[0]*bR[1]*bR[2]*0===0){aK=bR}return ar=P(j)});$("#poly").mouseup(function(bQ){bQ.preventDefault();return av=false});$("#poly").mouseleave(function(bQ){bQ.preventDefault();return av=false});$("#poly").mousemove(function(bT){var bR,bQ,bS;bT.preventDefault();if(av){bR=bT.clientX-$(this).offset().left;bQ=bT.clientY-$(this).offset().top;bS=aQ(bR,bQ,p,aB,D,bx,R,Y);if(bS[0]*bS[1]*bS[2]*0===0&&aK[0]*aK[1]*aK[2]*0===0){j=aJ(aH(aK,bS),ar)}return aF()}});$("#strokeonly").click(function(bQ){h="stroke";return aF()});$("#fillonly").click(function(bQ){h="fill";return aF()});$("#fillandstroke").click(function(bQ){h="fillstroke";return aF()});$("#siderot").click(function(bQ){j=a2(aO/2,0,1,0);return aF()});$("#toprot").click(function(bQ){j=a2(aO/2,1,0,0);return aF()});$("#frontrot").click(function(bQ){j=i(0,0,0);return aF()});$("#pngsavebutton").click(function(bT){var bS,bR,bQ;bS=$("#poly")[0];bQ=$("#spec").val().split(/\s+/g)[0];bR="polyhedronisme-"+bQ+".png";return bS.toBlob(function(bU){return saveAs(bU,bR)})});$("#objsavebutton").click(function(bT){var bR,bS,bQ;bS=U[0].toOBJ();bQ=$("#spec").val().split(/\s+/g)[0];bR="polyhedronisme-"+bQ+".obj";return aI(bS,bR)});return $("#x3dsavebutton").click(function(bT){var bR,bQ,bS,bU;bS=af(U[0],true);bU=bS.toVRML();bQ=$("#spec").val().split(/\s+/g)[0];bR="polyhedronisme-"+bQ+".wrl";return aI(bU,bR)})})}).call(this);