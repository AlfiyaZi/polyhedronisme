(function(){var a8,v,a0,aE,bv,au,bc,X,ac,ab,aM,av,a7,aZ,aP,i,bq,aF,ak,ba,E,D,aN,bo,a4,S,aD,bp,bs,h,r,aS,l,Q,br,bd,N,aC,aj,bk,ao,z,bB,ax,I,aH,W,aO,aA,ah,A,aG,bg,ar,O,a9,t,aJ,U,n,aq,B,bb,bA,k,bf,at,aR,J,K,j,aQ,ai,f,q,P,be,a2,aL,e,w,bz,ap,aw,az,bn,L,a3,V,al,bx,C,R,F,bw,Z,bl,bt,an,aW,bh,Y,ae,x,by,aT,bj,bi,aI,T,M,y,G,m,ad,aX,aK,ay,a6,aY,aV,aa,a5,bm,c,o,af,H,g,b,am,a,ag,p,aU,bu,a1,d,s,aB,u;aT=Math.random;ad=Math.round;ar=Math.floor;aa=Math.sqrt;a6=Math.sin;N=Math.cos;c=Math.tan;S=Math.asin;ba=Math.acos;aD=Math.atan;bh=Math.pow;ak=Math.abs;aP=Math.PI;X=Math.LN10;f=Math.log;bh=Math.pow;q=function(bC){return f(bC)/X};ay=function(bE,bD){var bC;bC=bh(10,q(bE)-ar(q(bE)));return""+(ad(bC*(bD-1)))};Q=function(bE){var bD,bC;if(!(bE!=null)||typeof bE!=="object"){return bE}bC=new bE.constructor();for(bD in bE){bC[bD]=Q(bE[bD])}return bC};bj=function(bD){var bC;bC=ar(aT()*bD.length);return bD[bC]};e=function(bD,bC){return[bD*bC[0],bD*bC[1],bD*bC[2]]};u=function(bD,bC){return[bD[0]*bC[0],bD[1]*bC[1],bD[2]*bC[2]]};E=function(bD,bC){return[bD[0]+bC[0],bD[1]+bC[1],bD[2]+bC[2]]};bm=function(bD,bC){return[bD[0]-bC[0],bD[1]-bC[1],bD[2]-bC[2]]};I=function(bD,bC){return bD[0]*bC[0]+bD[1]*bC[1]+bD[2]*bC[2]};aC=function(bD,bC){return[bD[1]*bC[2]-bD[2]*bC[1],bD[2]*bC[0]-bD[0]*bC[2],bD[0]*bC[1]-bD[1]*bC[0]]};P=function(bC){return aa(I(bC,bC))};be=function(bC){return I(bC,bC)};bu=function(bC){return e(1/aa(be(bC)),bC)};a2=function(bD,bC){return e(1/2,E(bD,bC))};p=function(bE,bD,bC){return[(1-bC)*bE[0]+bC*bD[0],(1-bC)*bE[1]+bC*bD[1],(1-bC)*bE[2]+bC*bD[2]]};az=function(bD,bC){return p(bD,bC,1/3)};aI=function(bC){return e(1/be(bC),bC)};o=function(bE,bD){var bC;bC=bm(bD,bE);return bm(bE,e(I(bC,bE)/be(bC),bC))};aA=function(bD,bC){return aa(be(o(bD,bC)))};a3=function(bG,bF,bE){var bD,bC;bD=bm(bF,bG);bC=bm(bE,bF);return aC(bD,bC)};K=function(bJ,bI,bH){var bN,bM,bL,bG,bF,bE,bK,bD,bC;for(bG=0,bK=bJ.length;bG<bK;bG++){bN=bJ[bG];for(bF=0,bD=bI.length;bF<bD;bF++){bM=bI[bF];if(bN===bM){for(bE=0,bC=bH.length;bE<bC;bE++){bL=bH[bE];if(bN===bL){return bN}}}}}return null};bs=function(bG){var bE,bD,bF,bC;bE=[0,0,0];for(bF=0,bC=bG.length;bF<bC;bF++){bD=bG[bF];bE=E(bE,bD)}return e(1/bG.length,bE)};ap=function(bG){var bC,bK,bI,bH,bE,bJ,bF,bD;bC=[0,0,0];bF=bG.slice(-2),bK=bF[0],bI=bF[1];for(bE=0,bJ=bG.length;bE<bJ;bE++){bH=bG[bE];bC=E(bC,a3(bK,bI,bH));bD=[bI,bH],bK=bD[0],bI=bD[1]}return bu(bC)};br=function(bG){var bC,bK,bI,bH,bE,bJ,bF,bD;bC=0;bF=bG.slice(0,2),bK=bF[0],bI=bF[1];bD=bG.slice(2);for(bE=0,bJ=bD.length;bE<bJ;bE++){bH=bD[bE];bC+=P(aC(bm(bI,bK),bm(bH,bK)));bI=bH}return bC};aG=function(bL){var bK,bR,bQ,bO,bM,bP,bI,bH,bG,bN,bD,bC,bJ,bF,bE;bK=[];bJ=bL.slice(0,2),bQ=bJ[0],bO=bJ[1];bF=bL.slice(2);for(bI=0,bN=bF.length;bI<bN;bI++){bM=bF[bI];bK.push(P(aC(bm(bO,bQ),bm(bM,bQ))));bO=bM}bK.sort(function(bT,bS){return bT-bS});bR="";for(bH=0,bD=bK.length;bH<bD;bH++){bP=bK[bH];bR+=ay(bP,2)}bE=bK.reverse();for(bG=0,bC=bE.length;bG<bC;bG++){bP=bE[bG];bR+=ay(bP,2)}return bR};ae=function(bJ){var bH,bD,bC,bG,bK,bL,bF,bI,bE;bG=Q(bJ);bL=bJ[0];bG=_.map(bG,function(bM){return bM-bL});bD=ap(bJ);bH=bu(bs(bJ));bC=aC(bD,bH);bE=[];for(bF=0,bI=bG.length;bF<bI;bF++){bK=bG[bF];bE.push([I(bD,bK),I(bC,bK)])}return bE};bd=function(bE){var bD,bC,bF;bC=new Array(bE.length);for(bD=0,bF=bE.length-1;0<=bF?bD<=bF:bD>=bF;0<=bF?bD++:bD--){bC[bD]=bE[bD].slice(0)}return bC};w=function(bD,bC){return[bD[0][0]*bC[0]+bD[0][1]*bC[1]+bD[0][2]*bC[2],bD[1][0]*bC[0]+bD[1][1]*bC[1]+bD[1][2]*bC[2],bD[2][0]*bC[0]+bD[2][1]*bC[1]+bD[2][2]*bC[2]]};aL=function(bC,bD){return[[bC[0][0]*bD[0][0]+bC[0][1]*bD[1][0]+bC[0][2]*bD[2][0],bC[0][0]*bD[0][1]+bC[0][1]*bD[1][1]+bC[0][2]*bD[2][1],bC[0][0]*bD[0][2]+bC[0][1]*bD[1][2]+bC[0][2]*bD[2][2]],[bC[1][0]*bD[0][0]+bC[1][1]*bD[1][0]+bC[1][2]*bD[2][0],bC[1][0]*bD[0][1]+bC[1][1]*bD[1][1]+bC[1][2]*bD[2][1],bC[1][0]*bD[0][2]+bC[1][1]*bD[1][2]+bC[1][2]*bD[2][2]],[bC[2][0]*bD[0][0]+bC[2][1]*bD[1][0]+bC[2][2]*bD[2][0],bC[2][0]*bD[0][1]+bC[2][1]*bD[1][1]+bC[2][2]*bD[2][1],bC[2][0]*bD[0][2]+bC[2][1]*bD[1][2]+bC[2][2]*bD[2][2]]]};A=[[1,0,0],[0,1,0],[0,0,1]];m=function(bG,bE,bF){var bH,bD,bC;bH=[[N(bG),-1*a6(bG),0],[a6(bG),N(bG),0],[0,0,1]];bC=[[N(bE),0,-1*a6(bE)],[0,1,0],[a6(bE),0,N(bE)]];bD=[[1,0,0],[0,N(bF),-1*a6(bF)],[0,a6(bF),N(bF)]];return aL(bD,aL(bC,bH))};a1=function(bG,bP,bN,bK){var bJ,bD,bE,bO,bM,bC,bL,bH,bI,bF;bG/=2;bO=a6(bG);bJ=N(bG);bM=bO*bO;bD=P([bP,bN,bK]);if(bD===0){bI=[0,0,1],bP=bI[0],bN=bI[1],bK=bI[2]}if(bD!==1){bF=bu([bP,bN,bK]),bP=bF[0],bN=bF[1],bK=bF[2]}if(bP===1&&bN===0&&bK===0){bE=[[1,0,0],[0,1-2*bM,2*bO*bJ],[0,-2*bO*bJ,1-2*bM]]}else{if(bP===0&&bN===1&&bK===0){bE=[[1-2*bM,0,-2*bO*bJ],[0,1,0],[2*bO*bJ,0,1-2*bM]]}else{if(bP===0&&bN===0&&bK===1){bE=[[1-2*bM,2*bO*bJ,0],[-2*bO*bJ,1-2*bM,0],[0,0,1]]}else{bC=bP*bP;bL=bN*bN;bH=bK*bK;bE=[[1-2*(bL+bH)*bM,2*(bP*bN*bM+bK*bO*bJ),2*(bP*bK*bM-bN*bO*bJ)],[2*(bN*bP*bM-bK*bO*bJ),1-2*(bH+bC)*bM,2*(bN*bK*bM+bP*bO*bJ)],[2*(bK*bP*bM+bN*bO*bJ),2*(bK*bN*bM-bP*bO*bJ),1-2*(bC+bL)*bM]]}}}return bE};C=function(bE,bD,bF,bI,bC){var bG,bH;bH=(bD*bI-bF)/(1-bI);bG=bC*bI/(1-bI);return[bG*bE[0]/(bE[2]+bH),bG*bE[1]/(bE[2]+bH)]};aQ=function(bJ,bG,bM,bK,bQ,bF,bE,bD){var bP,bC,bL,bH,bN,bS,bU,bI,bO,bR,bT;bO=(bQ*bE-bF)/(1-bE);bP=bD*bE/(1-bE);bL=bJ-bM;bS=bG-bK;bC=bP*bP;bR=bO*bO;bH=bL*bL;bU=bS*bS;bN=(2*bP*bL*bO+aa(4*bC*bH*bR+4*bH*(bC+bH+bU)*(1-bR)))/(2*(bC+bH+bU));bI=(bP*bS*bO)/(bC+bH+bU)+(bS*aa(4*bC*bR+4*(bC+bH+bU)*(1-bR)))/(2*(bC+bH+bU));bT=aa(1-bN*bN-bI*bI);return[bN,bI,bT]};aJ=function(bE,bD){var bF,bC;bC=aC(bE,bD);bF=ba(I(bE,bD));return a1(-1*bF,bC[0],bC[1],bC[2])};bg=function(bF){var bD,bH,bG,bE,bC;bD=[];bH=bF.slice(-1)[0];for(bE=0,bC=bF.length;bE<bC;bE++){bG=bF[bE];bD.push([bH,bG]);bH=bG}return bD};d=function(bC){var bH,bG,bK,bI,bE,bJ,bD,bF;bI=[];bF=bC.face;for(bG=0,bJ=bF.length;bG<bJ;bG++){bH=bF[bG];for(bE=0,bD=bH.length;bE<bD;bE++){bK=bH[bE];bI[bK]=bC.face_class[bG]}}return bI};aX=["#ff7777","#dddddd","#889999","#fff0e5","#aa3333","#ff0000","#ffffff","#aaaaaa"];bA=function(bD){var bC;if(bD[0]==="#"){bD=bD.slice(1)}if(bD.length===3){bC=bD.split("").map(function(bE){return parseInt(bE+bE,16)/255})}else{bC=bD.match(/.{2}/g).map(function(bE){return parseInt(bE,16)/255})}return bC};a7=aX;al=function(bC){if(bC<a7.length){return bA(a7[bC])}else{return bA(a7[a7.length-1])}};V=function(bC){var bL,bD,bH,bG,bJ,bK,bE,bI,bF;bC.face_class=[];bH={};bD=function(bM,bP){var bN,bO;bO=ad(100*bM);if(bO in bP){return bP[bO]}else{bN=_.toArray(bP).length;bP[bO]=bN;return bN}};bF=bC.face;for(bE=0,bI=bF.length;bE<bI;bE++){bG=bF[bE];if(au==="area"){bJ=(function(){var bO,bM,bN;bN=[];for(bO=0,bM=bG.length;bO<bM;bO++){bK=bG[bO];bN.push(bC.xyz[bK])}return bN})();bL=bD(br(bJ),bH)}else{if(au==="signature"){bJ=(function(){var bO,bM,bN;bN=[];for(bO=0,bM=bG.length;bO<bM;bO++){bK=bG[bO];bN.push(bC.xyz[bK])}return bN})();bL=bD(aG(bJ),bH)}else{bL=bG.length-3}}bC.face_class.push(bL)}console.log(_.toArray(bH).length+" face classes");return bC};aY=function(bC){var bD,bL,bK,bG,bE,bJ,bH,bI,bF;bD=bC.centers();bK=bC.normals();bG=[0,0,(F*R-bw)/(1-R)];bE=function(bN,bM){return bN[0][2]-bM[0][2]};bJ=_.zip(bD,bK,(function(){bF=[];for(var bN=0,bM=bC.face.length-1;0<=bM?bN<=bM:bN>=bM;0<=bM?bN++:bN--){bF.push(bN)}return bF}).apply(this)).sort(bE).map(function(bM){return bM[2]});bC.face=(function(){var bO,bM,bN;bN=[];for(bO=0,bM=bJ.length;bO<bM;bO++){bL=bJ[bO];bN.push(bC.face[bL])}return bN})();return bC.face_class=(function(){var bO,bM,bN;bN=[];for(bO=0,bM=bJ.length;bO<bM;bO++){bL=bJ[bO];bN.push(bC.face_class[bL])}return bN})()};aW=(function(){function bC(bF,bD,bE){this.face=bD||new Array();this.xyz=bF||new Array();this.name=bE||"null polyhedron"}bC.prototype.data=function(){var bD;bD=this.face.length+this.xyz.length-2;return"("+this.face.length+" faces, "+bD+" edges, "+this.xyz.length+" vertices)"};bC.prototype.edges=function(){var bN,bJ,bL,bK,bE,bI,bH,bO,bG,bF,bM,bD;bI={};bO=[];bJ=_.map(this.face,bg);for(bG=0,bM=bJ.length;bG<bM;bG++){bE=bJ[bG];for(bF=0,bD=bE.length;bF<bD;bF++){bK=bE[bF];if(bK[0]<bK[1]){bN=bK[0],bL=bK[1]}else{bL=bK[0],bN=bK[1]}bI[bN+"~"+bL]=bK}}for(bH in bI){bK=bI[bH];bO.push(bK)}return bO};bC.prototype.centers=function(){var bI,bJ,bF,bL,bG,bE,bK,bD,bH;bI=[];bH=this.face;for(bG=0,bK=bH.length;bG<bK;bG++){bJ=bH[bG];bF=[0,0,0];for(bE=0,bD=bJ.length;bE<bD;bE++){bL=bJ[bE];bF=E(bF,this.xyz[bL])}bI.push(e(1/bJ.length,bF))}return bI};bC.prototype.normals=function(){var bH,bI,bE,bG,bD,bF;bI=[];bF=this.face;for(bG=0,bD=bF.length;bG<bD;bG++){bH=bF[bG];bI.push(ap((function(){var bL,bJ,bK;bK=[];for(bL=0,bJ=bH.length;bL<bJ;bL++){bE=bH[bL];bK.push(this.xyz[bE])}return bK}).call(this)))}return bI};bC.prototype.toOBJ=function(){var bN,bM,bE,bO,bQ,bK,bJ,bI,bP,bF,bD,bR,bL,bH,bG;bO="#Produced by polyHÃ©dronisme http://levskaya.github.com/polyhedronisme\n";bO+="group "+this.name+"\n";bO+="#vertices\n";bL=this.xyz;for(bK=0,bP=bL.length;bK<bP;bK++){bQ=bL[bK];bO+="v "+bQ[0]+" "+bQ[1]+" "+bQ[2]+"\n"}bO+="#normal vector defs \n";bH=this.face;for(bJ=0,bF=bH.length;bJ<bF;bJ++){bN=bH[bJ];bE=ap((function(){var bT,bU,bS;bS=[];for(bT=0,bU=bN.length;bT<bU;bT++){bQ=bN[bT];bS.push(this.xyz[bQ])}return bS}).call(this));bO+="vn "+bE[0]+" "+bE[1]+" "+bE[2]+"\n"}bO+="#face defs \n";bG=this.face;for(bM=0,bD=bG.length;bM<bD;bM++){bN=bG[bM];bO+="f ";for(bI=0,bR=bN.length;bI<bR;bI++){bQ=bN[bI];bO+=""+(bQ+1)+"//"+(bM+1)+" "}bO+="\n"}return bO};bC.prototype.toX3D=function(){var bH,bQ,bT,bN,bP,bR,bL,bK,bJ,bG,bO,bE,bD,bS,bM,bI,bF;bH=0.01;bR='<?xml version="1.0" encoding ="UTF-8"?>\n<X3D profile="Interchange" version="3.0">\n<head>\n<component name="Rendering" level="3"/>\n<meta name="generator" content="Polyhedronisme"/>\n<meta name="version" content="0.1.0"/>\n</head>\n<Scene>\n<Shape>\n<IndexedFaceSet normalPerVertex="false" coordIndex="';bM=this.face;for(bL=0,bO=bM.length;bL<bO;bL++){bN=bM[bL];for(bK=0,bE=bN.length;bK<bE;bK++){bP=bN[bK];bR+=""+bP+" "}bR+="-1\n"}bR+='">\n';bR+='<Color color="';bI=d(this);for(bJ=0,bD=bI.length;bJ<bD;bJ++){bQ=bI[bJ];bT=al(bQ);bR+=""+bT[0]+" "+bT[1]+" "+bT[2]+" "}bR+='"/>';bR+='<Coordinate point="';bF=this.xyz;for(bG=0,bS=bF.length;bG<bS;bG++){bP=bF[bG];bR+=""+(bP[0]*bH)+" "+(bP[1]*bH)+" "+(bP[2]*bH)+" "}bR+='"/>\n';bR+="</IndexedFaceSet>\n</Shape>\n</Scene>\n</X3D>";return bR};bC.prototype.toVRML=function(){var bH,bQ,bT,bN,bP,bR,bL,bK,bJ,bG,bO,bE,bD,bS,bM,bI,bF;bH=0.01;bR='#VRML V2.0 utf8\n#Generated by Polyhedronisme\nNavigationInfo {\n	type [ "EXAMINE", "ANY" ]\n}\nTransform {\n  scale 1 1 1\n  translation 0 0 0\n  children\n  [\n    Shape\n    {\n      geometry IndexedFaceSet\n      {\n        creaseAngle .5\n        solid FALSE\n        coord Coordinate\n        {\n          point\n          [';bM=this.xyz;for(bL=0,bO=bM.length;bL<bO;bL++){bP=bM[bL];bR+=""+(bP[0]*bH)+" "+(bP[1]*bH)+" "+(bP[2]*bH)+","}bR=bR.slice(0,-1);bR+="    ]\n}\ncolor Color\n{\n  color\n  [";bI=this.face_class;for(bK=0,bE=bI.length;bK<bE;bK++){bQ=bI[bK];bT=al(bQ);bR+=""+bT[0]+" "+bT[1]+" "+bT[2]+" ,"}bR=bR.slice(0,-1);bR+="  ]\n}\ncolorPerVertex FALSE\ncoordIndex\n[";bF=this.face;for(bJ=0,bD=bF.length;bJ<bD;bJ++){bN=bF[bJ];for(bG=0,bS=bN.length;bG<bS;bG++){bP=bN[bG];bR+=""+bP+", "}bR+="-1,"}bR=bR.slice(0,-1);bR+="          ]\n      }\n      appearance Appearance\n      {\n        material Material\n        {\n	       ambientIntensity 0.2\n	       diffuseColor 0.9 0.9 0.9\n	       specularColor .1 .1 .1\n	       shininess .5\n        }\n      }\n    }\n  ]\n}";return bR};return bC})();g=function(){var bC;bC=new aW();bC.name="T";bC.face=[[0,1,2],[0,2,3],[0,3,1],[1,3,2]];bC.xyz=[[1,1,1],[1,-1,-1],[-1,1,-1],[-1,-1,1]];return bC};aw=function(){var bC;bC=new aW();bC.name="O";bC.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]];bC.xyz=[[0,0,1.414],[1.414,0,0],[0,1.414,0],[-1.414,0,0],[0,-1.414,0],[0,0,-1.414]];return bC};ao=function(){var bC;bC=new aW();bC.name="C";bC.face=[[3,0,1,2],[3,4,5,0],[0,5,6,1],[1,6,7,2],[2,7,4,3],[5,4,7,6]];bC.xyz=[[0.707,0.707,0.707],[-0.707,0.707,0.707],[-0.707,-0.707,0.707],[0.707,-0.707,0.707],[0.707,-0.707,-0.707],[0.707,0.707,-0.707],[-0.707,0.707,-0.707],[-0.707,-0.707,-0.707]];return bC};bf=function(){var bC;bC=new aW();bC.name="I";bC.face=[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]];bC.xyz=[[0,0,1.176],[1.051,0,0.526],[0.324,1,0.525],[-0.851,0.618,0.526],[-0.851,-0.618,0.526],[0.325,-1,0.526],[0.851,0.618,-0.526],[0.851,-0.618,-0.526],[-0.325,1,-0.526],[-1.051,0,-0.526],[-0.325,-1,-0.526],[0,0,-1.176]];return bC};ax=function(){var bC;bC=new aW();bC.name="D";bC.face=[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]];bC.xyz=[[0,0,1.07047],[0.713644,0,0.797878],[-0.356822,0.618,0.797878],[-0.356822,-0.618,0.797878],[0.797878,0.618034,0.356822],[0.797878,-0.618,0.356822],[-0.934172,0.381966,0.356822],[0.136294,1,0.356822],[0.136294,-1,0.356822],[-0.934172,-0.381966,0.356822],[0.934172,0.381966,-0.356822],[0.934172,-0.381966,-0.356822],[-0.797878,0.618,-0.356822],[-0.136294,1,-0.356822],[-0.136294,-1,-0.356822],[-0.797878,-0.618034,-0.356822],[0.356822,0.618,-0.797878],[0.356822,-0.618,-0.797878],[-0.713644,0,-0.797878],[0,0,-1.07047]];return bC};Y=function(bG){var bP,bO,bC,bE,bM,bL,bN,bJ,bH,bF,bD,bK,bI;bE=2*aP/bG;bP=Math.sin(bE/2);bC=new aW();bC.name="P"+bG;for(bO=0,bN=bG-1;0<=bN?bO<=bN:bO>=bN;0<=bN?bO++:bO--){bC.xyz.push([-N(bO*bE),-a6(bO*bE),-bP])}for(bO=0,bJ=bG-1;0<=bJ?bO<=bJ:bO>=bJ;0<=bJ?bO++:bO--){bC.xyz.push([-N(bO*bE),-a6(bO*bE),bP])}bC.face.push((function(){bK=[];for(var bQ=bH=bG-1;bH<=0?bQ<=0:bQ>=0;bH<=0?bQ++:bQ--){bK.push(bQ)}return bK}).apply(this));bC.face.push((function(){bI=[];for(var bQ=bG,bR=2*bG-1;bG<=bR?bQ<=bR:bQ>=bR;bG<=bR?bQ++:bQ--){bI.push(bQ)}return bI}).apply(this));for(bO=0,bD=bG-1;0<=bD?bO<=bD:bO>=bD;0<=bD?bO++:bO--){bC.face.push([bO,(bO+1)%bG,(bO+1)%bG+bG,bO+bG])}bC=D(bC,1);return bC};a4=function(bH){var bR,bQ,bP,bD,bC,bF,bN,bM,bO,bK,bI,bG,bE,bL,bJ;bF=2*aP/bH;bQ=aa(1-4/(4+2*N(bF/2)-2*N(bF)));bC=aa(1-bQ*bQ);bR=aa(bQ*bQ+bh(bC*N(bF/2),2));bC=-bC/bR;bQ=-bQ/bR;bD=new aW();bD.name="A"+bH;for(bP=0,bO=bH-1;0<=bO?bP<=bO:bP>=bO;0<=bO?bP++:bP--){bD.xyz.push([bC*N(bP*bF),bC*a6(bP*bF),bQ])}for(bP=0,bK=bH-1;0<=bK?bP<=bK:bP>=bK;0<=bK?bP++:bP--){bD.xyz.push([bC*N((bP+0.5)*bF),bC*a6((bP+0.5)*bF),-bQ])}bD.face.push((function(){bL=[];for(var bS=bI=bH-1;bI<=0?bS<=0:bS>=0;bI<=0?bS++:bS--){bL.push(bS)}return bL}).apply(this));bD.face.push((function(){bJ=[];for(var bS=bH,bT=2*bH-1;bH<=bT?bS<=bT:bS>=bT;bH<=bT?bS++:bS--){bJ.push(bS)}return bJ}).apply(this));for(bP=0,bE=bH-1;0<=bE?bP<=bE:bP>=bE;0<=bE?bP++:bP--){bD.face.push([bP,(bP+1)%bH,bP+bH]);bD.face.push([bP,bP+bH,(bH+bP-1)%bH+bH])}bD=D(bD,1);return bD};by=function(bE){var bL,bK,bC,bD,bI,bJ,bG,bF,bH;bD=2*aP/bE;bL=1;bC=new aW();bC.name="Y"+bE;for(bK=0,bJ=bE-1;0<=bJ?bK<=bJ:bK>=bJ;0<=bJ?bK++:bK--){bC.xyz.push([-N(bK*bD),-a6(bK*bD),-0.2])}bC.xyz.push([0,0,bL]);bC.face.push((function(){bH=[];for(var bM=bG=bE-1;bG<=0?bM<=0:bM>=0;bG<=0?bM++:bM--){bH.push(bM)}return bH}).apply(this));for(bK=0,bF=bE-1;0<=bF?bK<=bF:bK>=bF;0<=bF?bK++:bK--){bC.face.push([bK,(bK+1)%bE,bE])}bC=h(bC,3);return bC};an=(function(){function bC(){this.flags=new Object();this.verts=new Object();this.xyzs=new Object()}bC.prototype.newV=function(bE,bD){if(this.verts[bE]===void 0){this.verts[bE]=0;return this.xyzs[bE]=bD}};bC.prototype.newFlag=function(bD,bF,bE){if(this.flags[bD]===void 0){this.flags[bD]={}}return this.flags[bD][bF]=bE};bC.prototype.topoly=function(){var bE,bJ,bM,bI,bG,bD,bK,bL,bH,bF;bD=new aW();bE=0;bH=this.verts;for(bI in bH){bK=bH[bI];bD.xyz[bE]=this.xyzs[bI];this.verts[bI]=bE;bE++}bE=0;bF=this.flags;for(bI in bF){bJ=bF[bI];bD.face[bE]=[];for(bG in bJ){bK=bJ[bG];bL=bK;break}bK=bL;bD.face[bE].push(this.verts[bK]);bK=this.flags[bI][bK];bM=0;while(bK!==bL){bD.face[bE].push(this.verts[bK]);bK=this.flags[bI][bK];bM++;if(bM>1000){console.log("Bad flag spec, have a neverending face:",bI,this.flags[bI]);break}}bE++}bD.name="unknown polyhedron";return bD};return bC})();ai=function(bJ,bP,bI){var bH,bT,bS,bQ,bW,bG,bR,bL,bN,bO,bM,bF,bC,bD,bV,bX,bU,bK,bE;bP||(bP=0);bI||(bI=0.1);console.log("Taking kis of "+(bP===0?"":bP)+"-sided faces of "+bJ.name+"...");bQ=new an();bK=bJ.xyz;for(bR=0,bV=bK.length;bR<bV;bR++){bO=bK[bR];bQ.newV("v"+bR,bO)}bN=bJ.normals();bT=bJ.centers();bG=false;bE=bJ.face;for(bR=0,bX=bE.length;bR<bX;bR++){bS=bE[bR];bF="v"+bS[bS.length-1];for(bD=0,bU=bS.length;bD<bU;bD++){bM=bS[bD];bC="v"+bM;if(bS.length===bP||bP===0){bG=true;bH="apex"+bR;bW=""+bR+bF;bQ.newV(bH,E(bT[bR],e(bI,bN[bR])));bQ.newFlag(bW,bF,bC);bQ.newFlag(bW,bC,bH);bQ.newFlag(bW,bH,bF)}else{bQ.newFlag(""+bR,bF,bC)}bF=bC}}if(!bG){console.log("No "+bP+"-fold components were found.")}bL=bQ.topoly();bL.name="k"+(bP===0?"":bP)+bJ.name;return bL};aN=function(bD){var bL,bM,bK,bE,bH,bQ,bP,bN,bI,bO,bC,bJ,bG,bF;console.log("Taking ambo of "+bD.name+"...");bE=function(bS,bR){if(bS<bR){return bS+"_"+bR}else{return bR+"_"+bS}};bM=new an();bJ=bD.face;for(bK=0,bO=bJ.length;bK<bO;bK++){bL=bJ[bK];bG=bL.slice(-2),bQ=bG[0],bP=bG[1];for(bI=0,bC=bL.length;bI<bC;bI++){bN=bL[bI];if(bQ<bP){bM.newV(bE(bQ,bP),a2(bD.xyz[bQ],bD.xyz[bP]))}bM.newFlag("orig"+bK,bE(bQ,bP),bE(bP,bN));bM.newFlag("dual"+bP,bE(bP,bN),bE(bQ,bP));bF=[bP,bN],bQ=bF[0],bP=bF[1]}}bH=bM.topoly();bH.name="a"+bD.name;return bH};bb=function(bJ){var bR,bQ,bO,bU,bP,bN,bL,bM,bI,bG,bE,bT,bW,bV,bS,bK,bH,bF,bD,bC;console.log("Taking gyro of "+bJ.name+"...");bO=new an();bK=bJ.xyz;for(bP=0,bT=bK.length;bP<bT;bP++){bM=bK[bP];bO.newV("v"+bP,bu(bM))}bR=bJ.centers();bH=bJ.face;for(bP=0,bW=bH.length;bP<bW;bP++){bQ=bH[bP];bO.newV("center"+bP,bu(bR[bP]))}bF=bJ.face;for(bP=0,bV=bF.length;bP<bV;bP++){bQ=bF[bP];bD=bQ.slice(-2),bI=bD[0],bG=bD[1];for(bN=0,bS=bQ.length;bN<bS;bN++){bM=bQ[bN];bE=bM;bO.newV(bI+"~"+bG,az(bJ.xyz[bI],bJ.xyz[bG]));bU=bP+"f"+bI;bO.newFlag(bU,"center"+bP,bI+"~"+bG);bO.newFlag(bU,bI+"~"+bG,bG+"~"+bI);bO.newFlag(bU,bG+"~"+bI,"v"+bG);bO.newFlag(bU,"v"+bG,bG+"~"+bE);bO.newFlag(bU,bG+"~"+bE,"center"+bP);bC=[bG,bE],bI=bC[0],bG=bC[1]}}bL=bO.topoly();bL.name="g"+bJ.name;return bL};x=function(bJ){var bP,bN,bR,bO,bL,bM,bH,bE,bD,bF,bQ,bT,bS,bK,bI,bG,bC;console.log("Taking propellor of "+bJ.name+"...");bN=new an();bK=bJ.xyz;for(bO=0,bQ=bK.length;bO<bQ;bO++){bM=bK[bO];bN.newV("v"+bO,bu(bM))}bI=bJ.face;for(bO=0,bT=bI.length;bO<bT;bO++){bP=bI[bO];bG=bP.slice(-2),bH=bG[0],bE=bG[1];for(bF=0,bS=bP.length;bF<bS;bF++){bM=bP[bF];bD=""+bM;bN.newV(bH+"~"+bE,az(bJ.xyz[bH],bJ.xyz[bE]));bR=""+bO+"f"+bE;bN.newFlag("v"+bO,bH+"~"+bE,bE+"~"+bD);bN.newFlag(bR,bH+"~"+bE,bE+"~"+bH);bN.newFlag(bR,bE+"~"+bH,"v"+bE);bN.newFlag(bR,"v"+bE,bE+"~"+bD);bN.newFlag(bR,bE+"~"+bD,bH+"~"+bE);bC=[bE,bD],bH=bC[0],bE=bC[1]}}bL=bN.topoly();bL.name="p"+bJ.name;return bL};y=function(bE){var bC,bD,bF;console.log("Taking reflection of "+bE.name+"...");for(bC=0,bD=bE.xyz.length-1;0<=bD?bC<=bD:bC>=bD;0<=bD?bC++:bC--){bE.xyz[bC]=e(-1,bE.xyz[bC])}for(bC=0,bF=bE.face.length-1;0<=bF?bC<=bF:bC>=bF;0<=bF?bC++:bC--){bE.face[bC]=bE.face[bC].reverse()}bE.name="r"+bE.name;return bE};aO=function(bL){var bT,bZ,bS,bM,bQ,bR,bP,bO,bK,bH,bI,bF,bD,bW,bY,bX,bV,bU,bN,bJ,bG,bE,bC;console.log("Taking dual of "+bL.name+"...");bQ=new an();bM=[];for(bR=0,bN=bL.xyz.length-1;0<=bN?bR<=bN:bR>=bN;0<=bN?bR++:bR--){bM[bR]={}}bJ=bL.face;for(bR=0,bW=bJ.length;bR<bW;bR++){bS=bJ[bR];bK=bS[bS.length-1];for(bI=0,bY=bS.length;bI<bY;bI++){bH=bS[bI];bM[bK]["v"+bH]=""+bR;bK=bH}}bT=bL.centers();for(bR=0,bG=bL.face.length-1;0<=bG?bR<=bG:bR>=bG;0<=bG?bR++:bR--){bQ.newV(""+bR,bT[bR])}bE=bL.face;for(bR=0,bX=bE.length;bR<bX;bR++){bS=bE[bR];bK=bS[bS.length-1];for(bF=0,bV=bS.length;bF<bV;bF++){bH=bS[bF];bQ.newFlag(bK,bM[bH]["v"+bK],""+bR);bK=bH}}bZ=bQ.topoly();bO=[];bC=bZ.face;for(bD=0,bU=bC.length;bD<bU;bD++){bS=bC[bD];bP=K(bL.face[bS[0]],bL.face[bS[1]],bL.face[bS[2]]);bO[bP]=bS}bZ.face=bO;if(bL.name[0]!=="d"){bZ.name="d"+bL.name}else{bZ.name=bL.name.slice(1)}return bZ};J=function(bJ,bQ,bK,bR){var bV,bU,bS,b0,bI,bT,bM,bO,bP,bN,bH,bE,bF,bC,bZ,b1,bY,bX,bW,bL,bG,bD;bQ||(bQ=0);bK||(bK=0.5);bR||(bR=-0.2);console.log("Taking inset of "+(bQ===0?"":bQ)+"-sided faces of "+bJ.name+"...");bS=new an();bL=bJ.xyz;for(bT=0,bZ=bL.length;bT<bZ;bT++){bP=bL[bT];bS.newV("v"+bT,bP)}bO=bJ.normals();bV=bJ.centers();bG=bJ.face;for(bT=0,b1=bG.length;bT<b1;bT++){bU=bG[bT];if(bU.length===bQ||bQ===0){for(bF=0,bY=bU.length;bF<bY;bF++){bN=bU[bF];bS.newV("f"+bT+"v"+bN,E(p(bJ.xyz[bN],bV[bT],bK),e(bR,bO[bT])))}}}bI=false;bD=bJ.face;for(bT=0,bX=bD.length;bT<bX;bT++){bU=bD[bT];bH="v"+bU[bU.length-1];for(bC=0,bW=bU.length;bC<bW;bC++){bN=bU[bC];bE="v"+bN;if(bU.length===bQ||bQ===0){bI=true;b0=bT+bH;bS.newFlag(b0,bH,bE);bS.newFlag(b0,bE,"f"+bT+bE);bS.newFlag(b0,"f"+bT+bE,"f"+bT+bH);bS.newFlag(b0,"f"+bT+bH,bH);bS.newFlag("ex"+bT,"f"+bT+bH,"f"+bT+bE)}else{bS.newFlag(bT,bH,bE)}bH=bE}}if(!bI){console.log("No "+bQ+"-fold components were found.")}bM=bS.topoly();bM.name="n"+(bQ===0?"":bQ)+bJ.name;return bM};k=function(bK,bR,bL,bC){var bW,bU,bV,bS,b1,bJ,bT,bN,bP,bQ,bO,bI,bG,bF,bD,b0,b2,bZ,bY,bX,bM,bH,bE;bR||(bR=0);bL||(bL=0.5);bC||(bC=0.2);console.log("Skeletonizing "+(bR===0?"":bR)+"-sided faces of "+bK.name+"...");bU=aO(bK).normals();bP=bK.normals();bW=bK.centers();bS=new an();bM=bK.xyz;for(bT=0,b0=bM.length;bT<b0;bT++){bQ=bM[bT];bS.newV("v"+bT,bQ);bS.newV("downv"+bT,E(bQ,e(-1*bC,bU[bT])))}bH=bK.face;for(bT=0,b2=bH.length;bT<b2;bT++){bV=bH[bT];for(bF=0,bZ=bV.length;bF<bZ;bF++){bO=bV[bF];bS.newV("fin"+bT+"v"+bO,p(bK.xyz[bO],bW[bT],bL))}}bE=bK.face;for(bT=0,bY=bE.length;bT<bY;bT++){bV=bE[bT];bI="v"+bV[bV.length-1];for(bD=0,bX=bV.length;bD<bX;bD++){bO=bV[bD];bG="v"+bO;bJ=true;b1=bT+bI;bS.newFlag(b1,bI,bG);bS.newFlag(b1,bG,"fin"+bT+bG);bS.newFlag(b1,"fin"+bT+bG,"fin"+bT+bI);bS.newFlag(b1,"fin"+bT+bI,bI);b1="sides"+bT+bI;bS.newFlag(b1,"down"+bG,"down"+bI);bS.newFlag(b1,"down"+bI,"fin"+bT+bI);bS.newFlag(b1,"fin"+bT+bI,"fin"+bT+bG);bS.newFlag(b1,"fin"+bT+bG,"down"+bG);bI=bG}}bN=bS.topoly();bN.name="h"+bK.name;return bN};ah=function(bJ,bP){var bT,bS,bQ,bI,bR,bL,bN,bO,bM,bH,bE,bF,bC,bX,bY,bW,bV,bU,bK,bG,bD;bP||(bP=0);console.log("Taking extrusion of "+(bP===0?"":bP)+"-sided faces of "+bJ.name+"...");bQ=new an();bK=bJ.xyz;for(bR=0,bX=bK.length;bR<bX;bR++){bO=bK[bR];bQ.newV("v"+bR,bO)}bN=bJ.normals();bT=bJ.centers();bG=bJ.face;for(bR=0,bY=bG.length;bR<bY;bR++){bS=bG[bR];if(bS.length===bP||bP===0){for(bF=0,bW=bS.length;bF<bW;bF++){bM=bS[bF];bQ.newV("f"+bR+"v"+bM,E(bJ.xyz[bM],e(0.3,bN[bR])))}}}bI=false;bD=bJ.face;for(bR=0,bV=bD.length;bR<bV;bR++){bS=bD[bR];bH="v"+bS[bS.length-1];for(bC=0,bU=bS.length;bC<bU;bC++){bM=bS[bC];bE="v"+bM;if(bS.length===bP||bP===0){bI=true;bQ.newFlag(bR+bH,bH,bE);bQ.newFlag(bR+bH,bE,"f"+bR+bE);bQ.newFlag(bR+bH,"f"+bR+bE,"f"+bR+bH);bQ.newFlag(bR+bH,"f"+bR+bH,bH);bQ.newFlag("ex"+bR,"f"+bR+bH,"f"+bR+bE)}else{bQ.newFlag(bR,bH,bE)}bH=bE}}if(!bI){console.log("No "+bP+"-fold components were found.")}bL=bQ.topoly();bL.name="x"+(bP===0?"":bP)+bJ.name;return bL};a5=function(bL){var bW,bV,bT,bU,bQ,bS,bR,bI,bX,bG,bK,bJ,bD,bO,bN,bM,bF,bZ,b0,bY,bP,bH,bE,bC;console.log("Taking stella of "+bL.name+"...");bW=bL.centers();bT=new an();bP=bL.xyz;for(bU=0,bZ=bP.length;bU<bZ;bU++){bS=bP[bU];bT.newV("v"+bU,bS)}bH=bL.face;for(bU=0,b0=bH.length;bU<b0;bU++){bV=bH[bU];bI="v"+bV[bV.length-2];bG="v"+bV[bV.length-1];bO=bL.xyz[bV[bV.length-2]];bN=bL.xyz[bV[bV.length-1]];for(bF=0,bY=bV.length;bF<bY;bF++){bR=bV[bF];bD="v"+bR;bM=bL.xyz[bR];bX=bI+"~"+bG;bK=bG+"~"+bI;bJ=bG+"~"+bD;bT.newV(bX,a2(a2(bO,bN),bW[bU]));bT.newFlag("in"+bU,bX,bJ);bT.newFlag("f"+bU+bG,bJ,bX);bT.newFlag("f"+bU+bG,bX,bG);bT.newFlag("f"+bU+bG,bG,bJ);bT.newFlag("f"+bX,bI,bK);bT.newFlag("f"+bX,bK,bX);bT.newFlag("f"+bX,bX,bI);bE=[bG,bD],bI=bE[0],bG=bE[1];bC=[bN,bM],bO=bC[0],bN=bC[1]}}bQ=bT.topoly();bQ.name="l"+bL.name;return bQ};af=function(bF,bE){var bJ,bH,bG,bC,bK,bD,bI;bJ=0.1;bC=bd(bF);for(bD=0,bI=bE.length;bD<bI;bD++){bG=bE[bD];bK=o(bC[bG[0]],bC[bG[1]]);bH=e(bJ*1/2*(1-aa(I(bK,bK))),bK);bC[bG[0]]=E(bC[bG[0]],bH);bC[bG[1]]=E(bC[bG[1]],bH)}return bC};bi=function(bG,bF){var bJ,bH,bC,bD,bK,bE,bI;bC=(function(){var bO,bM,bN,bL;bL=[];for(bO=0,bM=bF.length;bO<bM;bO++){bN=bF[bO],bJ=bN[0],bH=bN[1];bL.push(o(bG[bJ],bG[bH]))}return bL})();bD=[0,0,0];for(bE=0,bI=bC.length;bE<bI;bE++){bK=bC[bE];bD=E(bD,bK)}bD=e(1/bF.length,bD);return _.map(bG,function(bL){return bm(bL,bD)})};G=function(bF){var bC,bE,bD;bE=[0,0,0];bC=_.max(_.map(bF,function(bG){return P(bG)}));bD=1/bC;return _.map(bF,function(bG){return[bD*bG[0],bD*bG[1],bD*bG[2]]})};bl=function(bI,bF){var bN,bK,bM,bJ,bE,bC,bO,bH,bG,bL,bD;bN=0.1;bC=bd(bI);for(bH=0,bL=bF.length;bH<bL;bH++){bJ=bF[bH];bM=(function(){var bR,bP,bQ;bQ=[];for(bR=0,bP=bJ.length;bR<bP;bR++){bO=bJ[bR];bQ.push(bI[bO])}return bQ})();bE=ap(bM);bK=bs(bM);if(I(bE,bK)<0){bE=e(-1,bE)}for(bG=0,bD=bJ.length;bG<bD;bG++){bO=bJ[bG];bC[bO]=E(bC[bO],e(I(e(bN,bE),bm(bK,bI[bO])),bE))}}return bC};r=function(bD,bJ){var bG,bE,bH,bI,bC,bF,bK;bJ||(bJ=1);console.log("Canonicalizing "+bD.name+"...");bE=bD.face;bG=bD.edges();bC=bD.xyz;bI=1;for(bH=0;0<=bJ?bH<=bJ:bH>=bJ;0<=bJ?bH++:bH--){bK=bd(bC);bC=af(bC,bG);bC=bi(bC,bG);bC=bl(bC,bE);bI=_.max(_.map(_.zip(bC,bK),function(bM){var bL,bN;bL=bM[0],bN=bM[1];return P(bm(bL,bN))}));if(bI<1e-8){break}}console.log("[canonicalization done, last |deltaV|="+bI+"]");bF=new aW(bC,bD.face,bD.name);console.log("canonicalize",bF);return bF};T=function(bF){var bG,bD,bE,bC;bD=bF.centers();for(bE=0,bC=bD.length;bE<bC;bE++){bG=bD[bE];bG=e(1/I(bG,bG),bG)}return bD};M=function(bE){var bS,bM,bF,bN,bC,bL,bR,bQ,bO,bJ,bI,bP,bD,bK,bH,bG;bS=[];bK=bE.face;for(bJ=0,bP=bK.length;bJ<bP;bJ++){bN=bK[bJ];bF=[0,0,0];bC=[0,0,0];bM=0;bH=bN.slice(-2),bR=bH[0],bQ=bH[1];for(bI=0,bD=bN.length;bI<bD;bI++){bO=bN[bI];bF=E(bF,bE.xyz[bO]);bC=E(bC,a3(bE.xyz[bR],bE.xyz[bQ],bE.xyz[bO]));bM+=aA(bE.xyz[bR],bE.xyz[bQ]);bG=[bQ,bO],bR=bG[0],bQ=bG[1]}bF=e(1/bN.length,bF);bC=bu(bC);bM=bM/bN.length;bL=aI(e(I(bF,bC),bC));bS.push(e((1+bM)/2,bL))}return bS};h=function(bG,bD){var bE,bC,bF;bD||(bD=1);bC=aO(bG);console.log("Pseudo-canonicalizing "+bG.name+"...");for(bE=0,bF=bD-1;0<=bF?bE<=bF:bE>=bF;0<=bF?bE++:bE--){bC.xyz=M(bG);bG.xyz=M(bC)}return new aW(bG.xyz,bG.face,bG.name)};D=function(bG,bD){var bE,bC,bF;bD||(bD=1);bC=aO(bG);console.log("Planarizing "+bG.name+"...");for(bE=0,bF=bD-1;0<=bF?bE<=bF:bE>=bF;0<=bF?bE++:bE--){bC.xyz=T(bG);bG.xyz=T(bC)}return new aW(bG.xyz,bG.face,bG.name)};O=function(b4){var b3,bZ,bU,bX,b2,bM,b5,bW,bS,bO,b1,bI,bY,bT,bK,bL,bN,bV,b0,bJ,bH,bG,bD,bC,bR,bP,bF,bQ,bE;bN=999;bY=[];bT=[];bK=b4.length;b1=function(b6,b7){return(b6||b7)&&!(b6&&b7)};b3=function(b8,b7,b6){return(b7[0]-b8[0])*(b6[1]-b8[1])-(b6[0]-b8[0])*(b7[1]-b8[1])};bS=function(b8,b7,b6){return b3(b8,b7,b6)>0};bO=function(b8,b7,b6){return b3(b8,b7,b6)>=0};bU=function(b8,b7,b6){return b3(b8,b7,b6)===0};bZ=function(b8,b7,b6){if(bU(b8,b7,b6)){return false}if(b8[0]!==b7[0]){return(b8[0]<=b6[0])&&(b6[0]<=b7[0])||(b8[0]>=b6[0])&&(b6[0]>=b7[0])}else{return(b8[1]<=b6[1])&&(b6[1]<=b7[1])||(b8[1]>=b6[1])&&(b6[1]>=b7[1])}};bW=function(b9,b8,b7,b6){if(bU(b9,b8,b7)||bU(b9,b8,b6)||bU(b7,b6,b9)||bU(b7,b6,b8)){return false}return b1(bS(b9,b8,b7),bS(b9,b8,b6))&&b1(bS(b7,b6,b9),bS(b7,b6,b8))};b5=function(b9,b8,b7,b6){if(bW(b9,b8,b7,b6)){return true}else{if(bZ(b9,b8,b7)||bZ(b9,b8,b6)||bZ(b7,b6,b9)||bZ(b7,b6,b8)){return true}else{return false}}};bM=function(b8,b6){var b9,b7;b7=(b8+1+bK)%bK;b9=(b8-1+bK)%bK;if(bO(b4[b8],b4[b7],b4[b9])){return bS(b4[b8],b4[b6],b4[b9])&&bS(b4[b6],b4[b8],b4[b7])}return !(bO(b4[b8],b4[b6],b4[b7])&&bO(b4[b6],b4[b8],b4[b9]))};b2=function(b7,b6){var b9,b8;b9=0;while(true){b8=(b9+1+bK)%bK;if((b9!==b7)&&(b8!==b7)&&(b9!==b6)&&(b8!==b6)&&bW(b4[b7],b4[b6],b4[b9],b4[b8])){return false}b9=(b9+1+bK)%bK;if(b9===0){break}}return true};bX=function(b7,b6){return bM(b7,b6)&&bM(b6,b7)&&b2(b7,b6)};bH=0;while(true){bG=(bH+1+bK)%bK;bJ=(bH-1+bK)%bK;bT[bH]=bX(bJ,bG);bH=(bH+1+bK)%bK;if(bH===0){break}}b0=(function(){bE=[];for(var b7=0,b6=bK-1;0<=b6?b7<=b6:b7>=b6;0<=b6?b7++:b7--){bE.push(b7)}return bE}).apply(this);bV=bK;bP=bN;bL=0;while(bP>0&&bV>3){bP-=1;bG=bL;bR=bN;while(true){bR-=1;bI=false;if(bT[bG]){bD=(bG+1+bK)%bK;bC=(bD+1+bK)%bK;bH=(bG-1+bK)%bK;bJ=(bH-1+bK)%bK;bY.push([b0[bH],b0[bD]]);bT[bH]=bX(bJ,bD);bT[bD]=bX(bH,bC);b4=b4.slice(0,bG+1||9000000000).concat(b4.slice(bD));b0=b0.slice(0,bG+1||9000000000).concat(b0.slice(bD));if(bJ>bG){bJ-=1}if(bH>bG){bH-=1}if(bD>bG){bD-=1}if(bC>bG){bC-=1}bK--;bL=bD;bV--;bI=true}bG=(bG+1+bK)%bK;if(!(bR>0&&!bI&&bG!==bL)){break}}}return bY};a=function(bD,bC){if(((bD[0]===bC[0])&&(bD[1]===bC[1])&&(bD[2]===bC[2]))||(bD[0]===bC[1])&&(bD[1]===bC[2])&&(bD[2]===bC[0])||(bD[0]===bC[2])&&(bD[1]===bC[0])&&(bD[2]===bC[1])){return true}else{return false}};z=function(b9,bW){var bT,ca,bV,bU,bR,bX,b7,bD,bN,cb,ce,cd,cc,b8,b6,b5,b4,bS,bK,bJ,bI,bH,bG,bF,bE,bC,b3,b2,b1,b0,bZ,bY,bQ,bP,bO,bM,bL;bR=[];bD=[];bY=(function(){var cg,cf;cf=[];for(b7=0,cg=b9.length-1;0<=cg?b7<=cg:b7>=cg;0<=cg?b7++:b7--){cf.push([b7,(b7+1)%b9.length])}return cf})();for(b8=0,bS=bY.length;b8<bS;b8++){bQ=bY[b8],cd=bQ[0],cc=bQ[1];bR[cd]=[cc];bD[cc]=[cd]}for(b6=0,bK=bW.length;b6<bK;b6++){ca=bW[b6];bR[ca[0]].push(ca[1]);bR[ca[1]].push(ca[0]);bD[ca[0]].push(ca[1]);bD[ca[1]].push(ca[0])}cb=[];for(b5=0,bJ=bW.length;b5<bJ;b5++){ca=bW[b5];bP=bR[ca[1]];for(b4=0,bI=bP.length;b4<bI;b4++){bV=bP[b4];bO=bD[ca[0]];for(b3=0,bH=bO.length;b3<bH;b3++){bU=bO[b3];if(bV===bU){cb.push([ca[0],ca[1],bV])}}}bM=bR[ca[0]];for(b2=0,bG=bM.length;b2<bG;b2++){bV=bM[b2];bL=bD[ca[1]];for(b1=0,bF=bL.length;b1<bF;b1++){bU=bL[b1];if(bV===bU){cb.push([ca[1],ca[0],bV])}}}}ce=[cb.pop()];for(b0=0,bE=cb.length;b0<bE;b0++){bN=cb[b0];bT=false;for(bZ=0,bC=ce.length;bZ<bC;bZ++){bX=ce[bZ];if(a(bN,bX)){bT=true;break}}if(!bT){ce.push(bN)}}return ce};ag=function(bE,bC){var bG,bF,bL,bK,bI,bH,bP,bO,bN,bM,bD,bJ;bC=bC||false;console.log("Triangulating faces of "+bE.name+"...");bH=new aW();bH.xyz=Q(bE.xyz);bH.face_class=[];bJ=bE.face;for(bK=0,bM=bJ.length;bK<bM;bK++){bL=bJ[bK];if(bL.length>3){bG=ae((function(){var bS,bQ,bR;bR=[];for(bS=0,bQ=bL.length;bS<bQ;bS++){bN=bL[bS];bR.push(bE.xyz[bN])}return bR})());bF=O(bG);bO=z(bL,bF);for(bI=0,bD=bO.length;bI<bD;bI++){bP=bO[bI];bH.face.push([bL[bP[0]],bL[bP[1]],bL[bP[2]]]);if(bC){bH.face_class.push(bE.face_class[bK])}}}else{bH.face.push([bL[0],bL[1],bL[2]]);if(bC){bH.face_class.push(bE.face_class[bK])}}}bH.name=bE.name;return bH};am=function(bC){var bH,bI,bK,bF,bE,bJ,bD,bG;bI="";bG=bC.face;for(bF=0,bJ=bG.length;bF<bJ;bF++){bH=bG[bF];for(bE=0,bD=bH.length;bE<bD;bE++){bK=bH[bE];bI+=""+bK+"->"}bI+="\n"}return console.log(bI)};H=function(){var bJ,bG,bF,bE,bI,bH,bD,bC;bE=["T","O","C","I","D","P3","P4","A4","A5","Y3","Y4"];bG=["k","a","g","p","d","n","x","*"];console.log("===== Test Basic Ops =====");for(bI=0,bD=bG.length;bI<bD;bI++){bJ=bG[bI];console.log("Operator "+bJ);for(bH=0,bC=bE.length;bH<bC;bH++){bF=bE[bH];console.log(bJ+bF+":",generatePoly(bJ+bF))}}return console.log("===== Done Testing Basic Ops =====")};aZ='/* series of opspecs */\nstart  = opspec+\n\n/* opspec one of:\n A  - single letter\n A3 - single letter and float\n B(5,4.3,3) - function call format w. float args\n*/\nopspec =\n   let:opcode args:opargs {return {"op":let,"args":args};}\n/ let:opcode float:float     {return {"op":let,"args":[float]};}\n/ let:opcode                     {return {"op":let,"args":[]};}\n\n/*\nparentheses surrounding comma-delimited list of floats i.e.\n( 1 , 3.2, 4 ) or (1) or (2,3)\n*/\nopargs = "("\n           num:( float:float ","? {return float} )+\n         ")" {return num;}\n\n/* just a letter */\nopcode = op:[a-zA-Z] {return op;}\n\n/* standard numerical types */\nint   = digits:[0-9-]+   { return parseInt(digits.join(""), 10);  }\nfloat = digits:[0-9.-]+  { return parseFloat(digits.join(""), 10); }';bn=PEG.buildParser(aZ);bB=function(bD,bC){return bD.apply(this,bC||[])};bp={T:g,O:aw,C:ao,I:bf,D:ax,P:Y,A:a4,Y:by};L={d:aO,k:ai,a:aN,g:bb,p:x,r:y,n:J,x:ah,l:a5,z:ag,h:k,K:h,C:r,A:D};aV=[[/e/g,"aa"],[/b/g,"ta"],[/o/g,"jj"],[/m/g,"kj"],[/t(\d*)/g,"dk$1d"],[/j/g,"dad"],[/s/g,"dgd"],[/dd/g,""],[/ad/g,"a"],[/gd/g,"g"],[/aO/g,"aC"],[/aI/g,"aD"],[/gO/g,"gC"],[/gI/g,"gD"]];a9=function(bF){var bC,bE,bI,bH,bD,bG;bE=bF;for(bH=0,bD=aV.length;bH<bD;bH++){bG=aV[bH],bI=bG[0],bC=bG[1];bE=bE.replace(bI,bC)}console.log(""+bF+" executed as "+bE);return bE};bz=function(bI){var bD,bK,bF,bM,bG,bL,bH,bC,bE,bJ;bH=a9(bI);bL=bn.parse(bH).reverse();bF=bL.shift();bK=bp[bF.op];bD=bF.args;bC=bB(bK,bD);for(bE=0,bJ=bL.length;bE<bJ;bE++){bF=bL[bE];bG=L[bF.op];bM=[bC].concat(bF.args);bC=bB(bG,bM)}bC.xyz=bi(bC.xyz,bC.edges());bC.xyz=G(bC.xyz);bC=V(bC);return bC};aj={};bv=500;aE=400;U={};n=Q(A);aq=Q(A);Z=800;F=5;bw=0;R=1.2;s=bv/2;aB=aE/2;B=new Date();v=true;a0="rgba(255,255,255,1.0)";au="area";i="fillstroke";bk=0.5;av=false;ac=0;ab=0;aM=[1,0,0];bc=["C2dakD","oC20kkkT","kn4C40A0dA4","opD","lT","lK5oC","knD","dn6x4K5bT","oox4P7","n18n18n9n9n9soxY9","khD","lhD"];aK=function(bE,bC){var bF,bD;bF=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;bD=new bF();bD.append(bE);return saveAs(bD.getBlob("text/plain;charset="+document.characterSet),bC)};bx=function(){var bC,bH,bG,bF,bE,bD;bD={};bC=/\+/g;bE=/([^&=]+)=?([^&]*)/g;bH=function(bI){return decodeURIComponent(bI.replace(bC," "))};bF=window.location.search.substring(1);while(bG=bE.exec(bF)){bD[bH(bG[1])]=bH(bG[2])}return bD};aR=function(){var bC;bC=$("#poly");bC.width(bv);bC.height(aE);aj=bC[0].getContext("2d");aj.lineWidth=bk;if(v){return aj.clearRect(0,0,bv,aE)}else{aj.clearRect(0,0,bv,aE);aj.fillStyle=a0;return aj.fillRect(0,0,bv,aE)}};aS=function(){if(v){return aj.clearRect(0,0,bv,aE)}else{aj.clearRect(0,0,bv,aE);aj.fillStyle=a0;return aj.fillRect(0,0,bv,aE)}};W=function(bJ,bR){var bD,bL,bK,bQ,bF,bH,bP,bI,bO,bM,bE,bS,bT,bN,bG,bC;bR||(bR=[3,3,3]);bH=_.map(bJ.xyz,function(bU){return bU});bJ.xyz=_.map(bJ.xyz,function(bU){return w(n,bU)});aY(bJ);bN=bJ.face;for(bQ=0,bS=bN.length;bQ<bS;bQ++){bL=bN[bQ];aj.beginPath();bI=bL[bL.length-1];bG=C(E(bR,bJ.xyz[bI]),F,bw,R,Z),bO=bG[0],bM=bG[1];aj.moveTo(bO+s,bM+aB);for(bE=0,bT=bL.length;bE<bT;bE++){bP=bL[bE];bC=C(E(bR,bJ.xyz[bP]),F,bw,R,Z),bO=bC[0],bM=bC[1];aj.lineTo(bO+s,bM+aB)}bD=al(bJ.face_class[bQ]);bK=(function(){var bV,bW,bU;bU=[];for(bV=0,bW=bL.length;bV<bW;bV++){bP=bL[bV];bU.push(bJ.xyz[bP])}return bU})();bF=I(ap(bK),bu([1,-1,0]));bD=e((bF/2+0.5)*0.7+0.3,bD);if(i==="fill"||i==="fillstroke"){aj.fillStyle="rgba("+(ad(bD[0]*255))+", "+(ad(bD[1]*255))+", "+(ad(bD[2]*255))+", "+1+")";aj.fill();aj.strokeStyle="rgba("+(ad(bD[0]*255))+", "+(ad(bD[1]*255))+", "+(ad(bD[2]*255))+", "+1+")";aj.stroke()}if(i==="fillstroke"){aj.fillStyle="rgba("+(ad(bD[0]*255))+", "+(ad(bD[1]*255))+", "+(ad(bD[2]*255))+", "+1+")";aj.fill();aj.strokeStyle="rgba(0,0,0, .3)";aj.stroke()}if(i==="stroke"){aj.strokeStyle="rgba(0,0,0, .8)";aj.stroke()}}return bJ.xyz=bH};aH=function(){var bE,bF,bD,bC;aS();bC=[];for(bE=0,bD=U.length;bE<bD;bE++){bF=U[bE];bC.push(W(bF,[0+3*bE,0,3]))}return bC};bo=function(){var bD,bE,bF,bC;aS();bD=(2*Math.PI)/180*B.getSeconds()*0.1;for(bE=0,bC=U.length;bE<bC;bE++){bF=U[bE];W(bF,[0+3*bE,0,3])}return setTimeout(bo,100)};$(function(){var bD,bC;aR();bC=bx();if("recipe" in bC){bD=[bC.recipe];$("#spec").val(bD)}else{bD=[bj(bc)];$("#spec").val(bD)}$("#palette").val(a7.reduce(function(bE,bF){return bE+" "+bF}));U=_.map(bD,function(bE){return bz(bE)});aH();$("#spec").change(function(bE){bD=$("#spec").val().split(/\s+/g).slice(0,2);U=_.map(bD,function(bF){return bz(bF)});return aH()});$("#palette").change(function(bE){a7=$(this).val().split(/\s+/g);return aH()});$("#poly").mousewheel(function(bG,bH,bF,bE){bG.preventDefault();Z*=(10+bH)/10;return aH()});$("#poly").mousedown(function(bE){var bF;bE.preventDefault();av=true;ac=bE.clientX-$(this).offset().left;ab=bE.clientY-($(this).offset().top-$(window).scrollTop());bF=aQ(ac,ab,s,aB,F,bw,R,Z);if(bF[0]*bF[1]*bF[2]*0===0){aM=bF}return aq=Q(n)});$("#poly").mouseup(function(bE){bE.preventDefault();return av=false});$("#poly").mouseleave(function(bE){bE.preventDefault();return av=false});$("#poly").mousemove(function(bH){var bF,bE,bG;bH.preventDefault();if(av){bF=bH.clientX-$(this).offset().left;bE=bH.clientY-($(this).offset().top-$(window).scrollTop());bG=aQ(bF,bE,s,aB,F,bw,R,Z);if(bG[0]*bG[1]*bG[2]*0===0&&aM[0]*aM[1]*aM[2]*0===0){n=aL(aJ(aM,bG),aq)}return aH()}});$("#strokeonly").click(function(bE){i="stroke";return aH()});$("#fillonly").click(function(bE){i="fill";return aH()});$("#fillandstroke").click(function(bE){i="fillstroke";return aH()});$("#siderot").click(function(bE){n=a1(aP/2,0,1,0);return aH()});$("#toprot").click(function(bE){n=a1(aP/2,1,0,0);return aH()});$("#frontrot").click(function(bE){n=m(0,0,0);return aH()});$("#pngsavebutton").click(function(bH){var bG,bF,bE;t(Q(U[0]));bG=$("#poly")[0];bE=$("#spec").val().split(/\s+/g)[0];bF="polyhedronisme-"+bE.replace(/\([^\)]+\)/g,"")+".png";return bG.toBlob(function(bI){return saveAs(bI,bF)})});$("#objsavebutton").click(function(bH){var bF,bG,bE;bG=U[0].toOBJ();bE=$("#spec").val().split(/\s+/g)[0];bF="polyhedronisme-"+bE.replace(/\([^\)]+\)/g,"")+".obj";return aK(bG,bF)});return $("#x3dsavebutton").click(function(bH){var bF,bE,bG,bI;bG=ag(U[0],true);bI=bG.toVRML();bE=$("#spec").val().split(/\s+/g)[0];bF="polyhedronisme-"+bE.replace(/\([^\)]+\)/g,"")+".wrl";return aK(bI,bF)})});b=function(bH,bS){var bC,bJ,bI,bG,bO,bF,bP,bQ,bR,bN,bM,bL,bD,bT,bU,bK,bE;bS||(bS=[3,3,3]);bH.xyz=_.map(bH.xyz,function(bV){return w(n,bV)});bP=_.map(bH.normals(),function(bV){return w(n,bV)});aY(bH);bH.face=bH.face.reverse();bR=[];bG=[];bK=bH.face;for(bO=0,bT=bK.length;bO<bT;bO++){bJ=bK[bO];bQ=[];for(bD=0,bU=bJ.length;bD<bU;bD++){bN=bJ[bD];bE=C(E(bS,bH.xyz[bN]),F,bw,R,Z),bM=bE[0],bL=bE[1];bQ.push([bM+s,bL+aB])}bR.push(bQ);console.log("twoDface",_.map(bQ,function(bV){return" ["+bV[0]+","+bV[1]+"] "}));bC=al(bH.face_class[bO]);bI=(function(){var bW,bX,bV;bV=[];for(bW=0,bX=bJ.length;bW<bX;bW++){bN=bJ[bW];bV.push(bH.xyz[bN])}return bV})();bF=I(ap(bI),bu([1,-1,0]));bC=e((bF/2+0.5)*0.7+0.3,bC);bG.push(bC)}return[bR,bG]};bq=function(bD,bC,bE){return(bD[0]-bE[0])*(bC[1]-bE[1])-(bD[1]-bE[1])*(bC[0]-bE[0])};aF=function(bJ,bI,bH,bG){var bF,bD,bC,bL,bE,bK;bF=bq(bJ,bI,bG);bD=bq(bJ,bI,bH);if(bF!==0&&bD!==0&&bF*bD<0){bC=bq(bH,bG,bJ);bL=bq(bH,bG,bI);if(bC*bL<0){bK=bC/(bC-bL);bE=[bJ[0]+bK*(bI[0]-bJ[0]),bJ[1]+bK*(bI[1]-bJ[1])];return bE}}return false};aU=function(bH){var bD,bI,bG,bF,bC,bE;bD=0;bI=bH[0];bE=bH.slice(1);for(bF=0,bC=bE.length;bF<bC;bF++){bG=bE[bF];bD+=(bI[0]+bG[0])*(bI[1]-bG[1]);bI=bG}return bD*0.5};l=function(bC){return aU(bC)>0};at=function(bC,bF){var bG,bE,bD;for(bG=0,bD=bC.length;bG<bD;bG++){bE=bC[bG];if(ak(bE[0]-bF[0])+ak(bE[1]-bF[1])<0.000001){return bG}}return -1};j=function(cc,cb){var bQ,bP,bD,bC,b7,ca,b1,bU,b5,b3,bK,bI,bT,bS,b0,bW,bZ,bY,b9,b8,b6,b4,b2,bR,bV,bN,bM,bL,bJ,bH,bG,bF,bE,bX,bO;b9=[];for(b8=0,bR=cc.length;b8<bR;b8++){bW=cc[b8];if(at(b9,bW)===-1){b9.push(bW)}}for(b6=0,bN=cb.length;b6<bN;b6++){bW=cb[b6];if(at(b9,bW)===-1){b9.push(bW)}}bD=[];b1=at(b9,cc[cc.length-1]);for(b4=0,bM=cc.length;b4<bM;b4++){bW=cc[b4];ca=at(b9,bW);bD.push([b1,ca]);b1=ca}bC=[];b1=at(b9,cb[cb.length-1]);for(b2=0,bL=cb.length;b2<bL;b2++){bW=cb[b2];ca=at(b9,bW);bC.push([b1,ca]);b1=ca}bT=(function(){var ce,cd;cd=[];for(b7=0,ce=bD.length-1;0<=ce?b7<=ce:b7>=ce;0<=ce?b7++:b7--){cd.push([])}return cd})();bS=(function(){var ce,cd;cd=[];for(b7=0,ce=bC.length-1;0<=ce?b7<=ce:b7>=ce;0<=ce?b7++:b7--){cd.push([])}return cd})();bU=[];for(b7=0,bJ=bD.length;b7<bJ;b7++){bQ=bD[b7];for(b5=0,bH=bC.length;b5<bH;b5++){bP=bC[b5];if(b0=aF(b9[bQ[0]],b9[bQ[1]],b9[bP[0]],b9[bP[1]])){bT[b7].push(b0);bS[b5].push(b0);if(at(b9,b0)===-1){b9.push(b0)}bU.push(at(b9,b0))}}}bK=[];for(b7=0,bG=bT.length;b7<bG;b7++){bZ=bT[b7];if(bT[b7].length>0){bT[b7].sort(function(ce,cd){return P(ce-b9[bD[b7][0]])-P(cd-b9[bD[b7][0]])});bK.push([bD[b7][0],at(b9,bT[b7][0])]);bX=bT[b7].slice(1);for(b3=0,bF=bX.length;b3<bF;b3++){bW=bX[b3];bK.push([at(b9,bT[b7][b3]),at(b9,bT[b7][b3+1])])}bK.push([at(b9,bT[b7][bT[b7].length-1]),bD[b7][1]])}else{bK.push(bD[b7])}}bI=[];for(b7=0,bE=bS.length;b7<bE;b7++){bY=bS[b7];if(bS[b7].length>0){bS[b7].sort(function(ce,cd){return P(ce-b9[bC[b7][0]])-P(cd-b9[bC[b7][0]])});bI.push([bC[b7][0],at(b9,bS[b7][0])]);bO=bS[b7].slice(1);for(b3=0,bV=bO.length;b3<bV;b3++){bW=bO[b3];bI.push([at(b9,bS[b7][b3]),at(b9,bS[b7][b3+1])])}bI.push([at(b9,bS[b7][bS[b7].length-1]),bC[b7][1]])}else{bI.push(bC[b7])}}return[b9,bK,bI,bU]};bt=function(bG,bQ){var bD,bL,bO,bK,bE,bP,bN,bJ,bI,bH,bM,bF,bC;bN=[];for(bJ=0,bM=bG.length;bJ<bM;bJ++){bP=bG[bJ];if(at(bN,bP)===-1){bN.push(bP)}}bL=[];bK=at(bN,bG[bG.length-1]);for(bI=0,bF=bG.length;bI<bF;bI++){bP=bG[bI];bO=at(bN,bP);bL.push([bK,bO]);bK=bO}bE=0;for(bH=0,bC=bL.length;bH<bC;bH++){bD=bL[bH];if(aF(bN[bD[0]],bN[bD[1]],bQ,[bQ[0],10000])){bE++}}console.log("pointInpoly called : "+bE,bE%2!==0);if(bE%2===0){return false}else{return true}};a8=function(bQ,bP){var bK,bN,bT,bO,bU,bJ,bF,bH,bG,bM,bS,bR,bI,bZ,bY,bE,bD,bC,bW,bX,bV,bL;bL=j(bQ,bP.reverse()),bY=bL[0],bH=bL[1],bG=bL[2],bU=bL[3];bK={};for(bE=0,bW=bH.length;bE<bW;bE++){bT=bH[bE];bK[bT[0]]=bT[1]}bN={};for(bD=0,bX=bG.length;bD<bX;bD++){bT=bG[bD];bN[bT[0]]=bT[1]}bZ={};if(bU.length===0){if(bt(bP,bQ[0])){return[]}else{return[bQ]}}bS=[];for(bC=0,bV=bU.length;bC<bV;bC++){bR=bU[bC];bI="B";if(bZ[bR+bI]){continue}bM=[];bF=bR;bZ[bF+bI]=true;bJ=0;while(bF!==bR&&bJ<1000){if(bK[bR]&&bN[bR]){bI=bI==="A"?"B":"A"}if(bI==="A"){bF=bK[bF]}else{bF=bN[bF]}bM.push(bF);bZ[bF+bI]=true}bS.push((function(){var b1,b2,b0;b0=[];for(b1=0,b2=bM.length;b1<b2;b1++){bO=bM[b1];b0.push(bY[bO])}return b0})())}return _.filter(bS,l)};t=function(bL){var bU,bN,bM,bK,bR,bQ,bW,bS,bF,bV,bT,bP,bI,bG,bE,bD,b0,b1,bZ,bY,bX,bC,bO,bJ,bH;console.log(bL.data());bO=b(bL),bT=bO[0],bK=bO[1];bR=[];bR.push(bT[0]);bJ=bT.slice(1);for(bI=0,b0=bJ.length;bI<b0;bI++){bN=bJ[bI];bQ=[bN];for(bG=0,b1=bR.length;bG<b1;bG++){bM=bR[bG];bW=[];for(bE=0,bZ=bQ.length;bE<bZ;bE++){bU=bQ[bE];bW=bW.concat(a8(bU,bM))}bQ=bW}bR=bR.concat(bQ)}bR=bR.reverse();console.log(bR.length,bR);bF='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1 Tiny//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-tiny.dtd">\n<svg version="1.1" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n         x="0px" y="0px" width="1024px" height="768px" viewBox="0 0 1024 768" overflow="inherit" xml:space="preserve">\n';bS="</svg>";bV=bF;for(bD=0,bY=bR.length;bD<bY;bD++){bU=bR[bD];bV+='<path fill="#25DF00" stroke="#000000" d="';bV+="M"+bU[0][0]+","+bU[0][1];bH=bU.slice(1);for(bC=0,bX=bH.length;bC<bX;bC++){bP=bH[bC];bV+="L"+bP[0]+","+bP[1]}bV+='z"/>\n'}bV+=bS;return console.log(bV)}}).call(this);
